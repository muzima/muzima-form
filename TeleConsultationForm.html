<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/muzima.css" rel="stylesheet">
        <link href="css/ui-darkness/jquery-ui-1.10.4.custom.min.css" rel="stylesheet">

        <script src="js/jquery.min.js"></script>
        <script src="js/jquery-ui-1.10.4.custom.min.js"></script>
        <script src="js/jquery.validate.min.js"></script>
        <script src="js/additional-methods.min.js"></script>
        <script src="js/jquery-autocomplete-min.js"></script>
        <script src="js/muzima.js"></script>

        <title>TeleConsultation Form</title>
    </head>
    <body class="col-md-10 col-md-offset-1">
        <div id="pre_populate_data"></div>
        <form id="teleconsultation_form" name="teleconsultation_form">

            <h2 class="text-center">TeleConsultation Form</h2>

            <div class="section">
                <h3>Demographics</h3>

                <div class="form-group">
                    <input class="form-control" id="patient.uuid"
                           name="patient.uuid" type="hidden" readonly="readonly">
                </div>
                <div class="form-group">
                    <label for="patient.medical_record_number">AMRS ID Number:</label>
                    <input class="form-control" id="patient.medical_record_number"
                           name="patient.medical_record_number" type="text" readonly="readonly">
                </div>
                <div class="form-group">
                    <label for="patient.family_name">Family Name:</label>
                    <input class="form-control" id="patient.family_name" name="patient.family_name" type="text"
                           readonly="readonly">
                </div>
                <div class="form-group">
                    <label for="patient.given_name">Given Name:</label>
                    <input class="form-control" id="patient.given_name" name="patient.given_name" type="text"
                           readonly="readonly">
                </div>
                <div class="form-group">
                    <label for="patient.middle_name">Middle Name:</label>
                    <input class="form-control" id="patient.middle_name" name="patient.middle_name" type="text"
                           readonly="readonly">
                </div>
                <div class="form-group">
                    <label for="patient.sex">Gender:</label>
                    <select class="form-control" id="patient.sex" name="patient.sex" disabled="disabled">
                        <option value="">...</option>
                        <option value="M">Male</option>
                        <option value="F">Female</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="patient.birthdate">Date Of Birth:</label>
                    <input class="form-control" id="patient.birthdate" name="patient.birthdate" type="text"
                           readonly="readonly">
                </div>
            </div>
            <div class="section">
                <h3>Encounter Details</h3>

                <div class="form-group">
                    <label for="encounter.location_id">Location Name:<span class="required">*</span></label>
                    <input class="form-control valid-location-only" id="encounter.location_id" type="text" placeholder="Start typing something..."
                           required="required">
                    <input class="form-control" name="encounter.location_id" type="hidden">
                </div>
                <div class="form-group">
                    <label for="encounter.provider_id_select">Provider ID:</label>
                    <input class="form-control valid-provider-only" id="encounter.provider_id_select" type="text" placeholder="Start typing something...">
                    <input class="form-control" name="encounter.provider_id_select" type="hidden">
                </div>
                <div class="form-group show_provider_id_text">
                    <label for="encounter.provider_id">Enter provider's system-id:<span class="required">*</span></label>
                    <input class="form-control checkDigit" id="encounter.provider_id" name="encounter.provider_id"
                           type="text" required="required">
                </div>
                <div class="form-group">
                    <label for="encounter.encounter_datetime">Encounter Date:<span class="required">*</span></label>
                    <input class="form-control datepicker nonFutureDate" id="encounter.encounter_datetime"
                           name="encounter.encounter_datetime" type="text" readonly="readonly"
                           required="required">
                </div>
                <div class="form-group">
                    <input class="form-control" id="encounter.form_uuid" name="encounter.form_uuid"
                           type="hidden" required="required">
                </div>
            </div>
            <div class="section">
                <h3>Consultation Details</h3>

                <div class="form-group">
                    <label for="obs.history_of_current_problem">History of Current Problem:<span class="required">*</span></label>
                    <textarea class="form-control" id="obs.history_of_current_problem"
                           name="obs.history_of_current_problem" type="text" required="required" rows="5"
                           data-concept="9021^HISTORY OF CURRENT PROBLEM, FREETEXT^99DCT"></textarea>
                </div>

                <div class="form-group">
                    <label for="obs.previous_treatment_received_by_patient">Previous Treatment Received by Patient:<span class="required">*</span></label>
                    <textarea class="form-control" id="obs.previous_treatment_received_by_patient"
                           name="obs.previous_treatment_received_by_patient" type="text" required="required" rows="5"
                           data-concept="9022^PREVIOUS TREATMENT RECEIVED BY PATIENT, FREETEXT^99DCT"></textarea>
                </div>

                <div class="form-group">
                    <label for="obs.question_for_consultant">Question to Consultant:<span class="required">*</span></label>
                    <textarea class="form-control" id="obs.question_for_consultant"
                           name="obs.question_for_consultant" type="text" required="required" rows="5"
                           data-concept="9023^QUESTIONS FOR CONSULTANT, FREETEXT^99DCT"></textarea>
                </div>

                <div class="form-group">
                    <label for="obs.consultant_priority">Priority:<span class="required">*</span></label>
                    <select class="form-control" id="obs.consultant_priority" name="obs.consultant_priority"
                            data-concept="9024^CONSULTANT PRIORITY^99DCT" required="required">
                        <option value="">...</option>
                        <option value="6848^LOW^99DCT">Low</option>
                        <option value="1115^NORMAL^99DCT">Normal</option>
                        <option value="6927^HIGH^99DCT">High</option>
                        <option value="8989^CRITICAL^99DCT">Critical</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="consultation.recipient">Select Consultant:<span class="required">*</span></label>
                    <input class="form-control valid-consultant-only" id="consultation.recipient" type="text" placeholder="Start typing something..."
                           required="required">
                    <input class="form-control" name="consultation.recipient" type="hidden">
                </div>

                <div class="section repeat consultation_image" id="consultation_image" data-name="consultation_image"
                     data-concept="9058^CAPTURED CLINICAL MEDIA, IMAGE, DETAILED^99DCT">
                    <h4>Capture Media</h4>

                    <div class="form-group">
                        <label for="obs.consultation_image">Consultation Image:<span class="required">*</span></label>
                        <input type="button" class='btn image_btn'>
                        <input class="image_text form-control" id="obs.consultation_image" readonly="readonly"
                               name="obs.consultation_image" type="hidden" data-concept="9027^CAPTURED CLINICAL MEDIA, IMAGE^99DCT"/>
                        <div class="form-group">
                            <label for="obs.consultation_image_caption">Image Caption:</label>
                            <input class="form-control" id="obs.consultation_image_caption" readonly="readonly"
                                   name="obs.consultation_image_caption" type="text" required="required"
                                   data-concept="9057^CAPTURED CLINICAL MEDIA FREETEXT CAPTION, IMAGE^99DCT">
                        </div>
                    </div>
                </div>

                <div class="section repeat consultation_audio" id="consultation_audio" data-name="consultation_audio"
                     data-concept="9092^CAPTURED CLINICAL MEDIA, AUDIO, DETAILED^99DCT">
                    <h4>Capture Media</h4>

                    <div class="form-group">
                        <label for="obs.consultation_audio">Consultation Audio:</label>
                        <input type="button" class='btn audio_record_btn'>
                        <input class="audio_record_text form-control" id="obs.consultation_audio" readonly="readonly"
                               name="obs.consultation_audio" type="hidden" data-concept="9090^CAPTURED CLINICAL MEDIA, AUDIO^99DCT"/>
                        <div class="form-group">
                            <label for="obs.consultation_audio_caption">Audio Caption:</label>
                            <input class="form-control" id="obs.consultation_audio_caption" readonly="readonly"
                                   name="obs.consultation_audio_caption" type="text"
                                   data-concept="9091^CAPTURED CLINICAL MEDIA FREETEXT CAPTION, AUDIO^99DCT">
                        </div>
                    </div>
                </div>

                <div class="section repeat consultation_video" id="consultation_video" data-name="consultation_video"
                     data-concept="9089^CAPTURED CLINICAL MEDIA, VIDEO, DETAILED^99DCT">
                    <h4>Capture Media</h4>

                    <div class="form-group">
                        <label for="obs.consultation_video">Consultation Video:</label>
                        <input type="button" class='btn video_record_btn'>
                        <input class="video_record_text form-control" id="obs.consultation_video" readonly="readonly"
                               name="obs.consultation_video" type="hidden" data-concept="9087^CAPTURED CLINICAL MEDIA, VIDEO^99DCT"/>
                        <div class="form-group">
                            <label for="obs.consultation_video_caption">Video Caption:</label>
                            <input class="form-control" id="obs.consultation_video_caption" readonly="readonly"
                                   name="obs.consultation_video_caption" type="text"
                                   data-concept="9088^CAPTURED CLINICAL MEDIA FREETEXT CAPTION, VIDEO^99DCT">
                        </div>
                    </div>
                </div>
            </div>

        </form>

    </body>
    <script type="text/javascript">
        $(document).ready(function () {

             var dateFormat = "dd-mm-yy";
             var currentDate = $.datepicker.formatDate(dateFormat, new Date());
              var encounterDatetime = $('#encounter\\.encounter_datetime');
                if ($(encounterDatetime).val() == "") {
                $(encounterDatetime).val(currentDate);
              }

            $('#save_draft').click(function () {
            // pre process the medications
            $(this).prop('disabled', true);
            document.saveDraft(this);
            $(this).prop('disabled', false);
        });

        $('#submit_form').click(function () {
            // pre process the medications
            $(this).prop('disabled', true);
            document.submit();
            $(this).prop('disabled', false);
        });

            $('#teleconsultation_form').validate({});

            var dispensaryName = [
                {"val": "1", "label": "Unknown Location"},
                {"val": "2", "label": "Mosoriot Health Centre"},
                {"val": "3", "label": "Turbo Health Centre"},
                {"val": "12", "label": "Teso District Hospital"},
                {"val": "60", "label": "Chepsaita Dispensary"},
                {"val": "65", "label": "Angurai Health Centre"},
                {"val": "90", "label": "Changara Dispensary"},
                {"val": "91", "label": "Malaba Dispensary"},
                {"val": "106", "label": "Kamollo Dispensary"},
                {"val": "110", "label": "Mogoget Dispensary"},
                {"val": "111", "label": "Biribiriet Dispensary"},
                {"val": "112", "label": "Itigo Dispensary"},
                {"val": "113", "label": "Lelmokwo Dispensary"},
                {"val": "114", "label": "Kokwet Dispensary"},
                {"val": "115", "label": "Ngechek Dispensary"},
                {"val": "116", "label": "Cheramei Dispensary"},
                {"val": "117", "label": "Murgusi Dispensary"},
                {"val": "118", "label": "Cheplasgei Dispensary"},
                {"val": "119", "label": "Sigot Dispensary"},
                {"val": "120", "label": "Sugoi A Dispensary"},
                {"val": "121", "label": "Sugoi B Dispensary"},
                {"val": "122", "label": "Chepkemel Dispensary"},
                {"val": "124", "label": "Akichelesit Dispensary"},
                {"val": "125", "label": "Aboloi Dispensary"},
                {"val": "126", "label": "Moding Dispensary"},
                {"val": "127", "label": "Sambut"},
                {"val": "128", "label": "Ngenyilel"},
                {"val": "129", "label": "Sosiani"}
            ];

            document.setupAutoComplete('encounter\\.location_id',dispensaryName);

            var provider = [{"val":"3356-3","label":"David S. Pamba"},
                {"val":"237-8","label":"Ariya Patrick"},
                {"val":"3331-6","label":"Benjamin Osiya Ekirapa"},
                {"val":"3332-4","label":"Molly Omodek Aluku"},
                {"val":"3333-2","label":"Mercyline Lubisya Omusolo"},
                {"val":"3334-0","label":"Julita Auma Ndege"},
                {"val":"3335-7","label":"Caroline Fedha Injete"},
                {"val":"3336-5","label":"Nelly Nabwire Shiundu"},
                {"val":"3337-3","label":"Nicholas Dekkers Shitaha"},
                {"val":"3338-1","label":"Tezra Asangire Okaal"},
                {"val":"3340-7","label":"Sophy Ikarot Idele"},
                {"val":"3339-9","label":"Maureen Jacinta Muteitsi"},
                {"val":"3341-5","label":"Gibson Musera Mutira"},
                {"val":"3342-3","label":"Titus Chuma Khusua"},
                {"val":"3343-1","label":"Pamela Ekuriai Emukule"},
                {"val":"3344-9","label":"Rhoda Jeruto Kurgat"},
                {"val":"3345-6","label":"Zaitun Hassan Mohamed"},
                {"val":"3346-4","label":"Grace Gichanga Nyathogora"},
                {"val":"3347-2","label":"Gabriel Silas Okapes"},
                {"val":"3348-0","label":"Henry Samson Obonyo"},
                {"val":"3349-8","label":"Rebecca M. Wambura"},
                {"val":"3350-6","label":"Zeruya Amwatok Barua"},
                {"val":"3351-4","label":"Immaculate Otengo Namibia"},
                {"val":"3352-2","label":"Pamela Were Wamoyi"},
                {"val":"3357-1","label":"Caroline Wafula Nandisi"},
                {"val":"3353-0","label":"Markins Opuko Cresent"},
                {"val":"3354-8","label":"Benedict Kifufuli Wafula"},
                {"val":"4-2","label":"Sam Sam"},
                {"val":"3355-5","label":"Clementine Ingosi Osiel"}
            ];

            document.setupAutoCompleteForProvider('encounter\\.provider_id_select', provider);

            $('#encounter\\.provider_id_select').change(function(){
                if($('#encounter\\.provider_id_select').val() == ''){
                    $('#encounter\\.provider_id').val('');
                    $('.show_provider_id_text').show();
                }
            });
            var consultant = [
                {"val":"3356-3:u","label":"David S. Pamba"},
                {"val":"237-8:u","label":"Ariya Patrick"},
                {"val":"3331-6:u","label":"Benjamin Osiya Ekirapa"},
                {"val":"3332-4:u","label":"Molly Omodek Aluku"},
                {"val":"3333-2:u","label":"Mercyline Lubisya Omusolo"},
                {"val":"3334-0:u","label":"Julita Auma Ndege"},
                {"val":"3335-7:u","label":"Caroline Fedha Injete"},
                {"val":"3336-5:u","label":"Nelly Nabwire Shiundu"},
                {"val":"3337-3:u","label":"Nicholas Dekkers Shitaha"},
                {"val":"3338-1:u","label":"Tezra Asangire Okaal"},
                {"val":"3340-7:u","label":"Sophy Ikarot Idele"},
                {"val":"3339-9:u","label":"Maureen Jacinta Muteitsi"},
                {"val":"3341-5:u","label":"Gibson Musera Mutira"},
                {"val":"3342-3:u","label":"Titus Chuma Khusua"},
                {"val":"3343-1:u","label":"Pamela Ekuriai Emukule"},
                {"val":"3344-9:u","label":"Rhoda Jeruto Kurgat"},
                {"val":"3345-6:u","label":"Zaitun Hassan Mohamed"},
                {"val":"3346-4:u","label":"Grace Gichanga Nyathogora"},
                {"val":"3347-2:u","label":"Gabriel Silas Okapes"},
                {"val":"3348-0:u","label":"Henry Samson Obonyo"},
                {"val":"3349-8:u","label":"Rebecca M. Wambura"},
                {"val":"3350-6:u","label":"Zeruya Amwatok Barua"},
                {"val":"3351-4:u","label":"Immaculate Otengo Namibia"},
                {"val":"3352-2:u","label":"Pamela Were Wamoyi"},
                {"val":"3357-1:u","label":"Caroline Wafula Nandisi"},
                {"val":"3353-0:u","label":"Markins Opuko Cresent"},
                {"val":"3354-8:u","label":"Benedict Kifufuli Wafula"},
                {"val":"admin:u","label":"Super User"},
                {"val":"3355-5:u","label":"Clementine Ingosi Osiel"}];

            document.setupAutoComplete('consultation\\.recipient',consultant);

            document.setupValidationForProvider("$('#encounter\\.provider_id_select').val()","encounter\\.provider_id",provider);

            document.setupValidationForLocation("$('#encounter\\.location_id').val()","encounter\\.location_id",dispensaryName);

            document.setupValidationForConsultation("$('#consultation\\.recipient').val()","consultation\\.recipient",consultant);

        });

    </script>
</html>
