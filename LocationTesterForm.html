<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/muzima.css" rel="stylesheet">
    <link href="css/ui-darkness/jquery-ui-1.10.4.custom.min.css" rel="stylesheet">
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-ui-1.10.4.custom.min.js"></script>
    <script src="js/jquery.validate.min.js"></script>
    <script src="js/additional-methods.min.js"></script>
    <script src="js/muzima.js"></script>

    <title>Breast Cancer Screening Form v 0.01</title>
</head>

<body class="col-md-10 col-md-offset-1">
<div id="pre_populate_data"></div>
<h2 class="text-center">Breast Cancer Screening Form v 0.01</h2>

<form class="relevant-female" id="breastcancer_form" name="breastcancer_form">

<div class="section">
    <h3>Demographics</h3>

    <div class="form-group">
        <input class="form-control" id="patient.uuid" name="patient.uuid" type="hidden" readonly="readonly">
    </div>
    <div class="form-group">
        <label for="patient.medical_record_number">AMRS ID Number:</label>
        <input class="form-control" id="patient.medical_record_number" name="patient.medical_record_number" type="text"
               readonly="readonly">
    </div>
    <div class="form-group">
        <label for="patient.family_name">Family Name:</label>
        <input class="form-control" id="patient.family_name" name="patient.family_name" type="text" readonly="readonly">
    </div>
    <div class="form-group">
        <label for="patient.given_name">Given Name:</label>
        <input class="form-control" id="patient.given_name" name="patient.given_name" type="text" readonly="readonly">
    </div>
    <div class="form-group">
        <label for="patient.middle_name">Middle Name:</label>
        <input class="form-control" id="patient.middle_name" name="patient.middle_name" type="text" readonly="readonly">
    </div>
    <div class="form-group">
        <label for="patient.sex">Gender:</label>
        <select class="form-control" id="patient.sex" name="patient.sex" disabled="disabled">
            <option value="">...</option>
            <option value="M">Male</option>
            <option value="F">Female</option>
        </select>
    </div>
    <div class="form-group">
        <label for="patient.birthdate">Date Of Birth:</label>
        <input class="form-control" id="patient.birthdate" name="patient.birthdate" type="text" readonly="readonly">
    </div>
</div>
<div class="section">
    <h3>Encounter Details</h3>

    <div class="form-group">
        <label for="encounter.location_id">Screening Site:<span class="required">*</span></label>
        <select class="form-control" name="encounter.location_id" id="encounter.location_id" required="required">
            <option>...</option>
            <option value="84" data-location="AMPATH-MTRH">AMPATH-MTRH</option>
            <option value="19" data-location="Busia">Busia</option>
            <option value="7" data-location="Chulaimbo">Chulaimbo</option>
            <option value="17" data-location="Iten" >Iten</option>
            <option value="11" data-location="Kitale">Kitale</option>
            <option value="2" data-location="Mosoriot Health Centre">Mosoriot Health Centre</option>
            <option value="20" data-location="Port Victoria">Port Victoria</option>
            <option value="12" data-location="Teso District Hospital">Teso District Hospital</option>
            <option value="3" data-location="Turbo Health Centre">Turbo Health Centre</option>
            <option value="8" data-location="Webuy">Webuye</option>
        </select>
    </div>

    <div class="form-group">
        <label for="encounter.encounter_datetime">Encounter Date:<span class="required">*</span></label>
        <input class="form-control datepicker nonFutureDate past-date" id="encounter.encounter_datetime"
               name="encounter.encounter_datetime"
               type="text" readonly="readonly" required="required">
    </div>
    <div class="form-group">
        <input class="form-control" id="encounter.form_uuid" name="encounter.form_uuid" type="hidden"
               required="required">
    </div>
</div>

<div class="section">
    <h4>How did you learn about this service (check all that apply)?<span class="required">*</span></h4>
    <fieldset name="8250^COMMUNICATION CHANNEL OF KNOWING THE PROGRAM OR SERVICE^99DCT">
        <div class="form-group">
            <label class="font-normal">
                <input id="service_referrals.radio" type="checkbox"
                       data-concept="8250^COMMUNICATION CHANNEL OF KNOWING THE PROGRAM OR SERVICE^99DCT"
                       value="6391^RADIO, AUDIO DEVICE^99DCT"/>
                Radio
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="service_referrals.newspaper" type="checkbox"
                       data-concept="8250^COMMUNICATION CHANNEL OF KNOWING THE PROGRAM OR SERVICE^99DCT"
                       value="8249^NEWSPAPER^99DCT"/>
                Newspaper
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="service_referrals.word_of_mouth" type="checkbox"
                       data-concept="8250^COMMUNICATION CHANNEL OF KNOWING THE PROGRAM OR SERVICE^99DCT"
                       value="8248^WORD OF MOUTH^99DCT"/>
                Word of mouth
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="service_referrals.ampath" type="checkbox"
                       data-concept="8250^COMMUNICATION CHANNEL OF KNOWING THE PROGRAM OR SERVICE^99DCT"
                       value="1286^AMPATH^99DCT"/>
                AMPATH
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="service_referrals.mtrh" type="checkbox"
                       data-concept="8250^COMMUNICATION CHANNEL OF KNOWING THE PROGRAM OR SERVICE^99DCT"
                       value="1274^MOI TEACHING AND REFERRAL HOSPITAL^99DCT"/>
                Moi teaching and referral hospital
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="service_referrals.non_mtrh" type="checkbox"
                       data-concept="8250^COMMUNICATION CHANNEL OF KNOWING THE PROGRAM OR SERVICE^99DCT"
                       value="6479^NON-MTRH CONSULTANT^99DCT"/>
                Non-MTRH consultant
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="service_referrals.patient_refusal" type="checkbox"
                       data-concept="8250^COMMUNICATION CHANNEL OF KNOWING THE PROGRAM OR SERVICE^99DCT"
                       value="1504^PATIENT REFUSAL^99DCT"/>
                Patient referral
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input class="has-freetext" id="service_referrals.other" type="checkbox"
                       data-concept="8250^COMMUNICATION CHANNEL OF KNOWING THE PROGRAM OR SERVICE^99DCT"
                       value="5622^OTHER NON-CODED^99DCT"/>
                Other
            </label>
        </div>
        <div class="form-group freetext">
            <label for="service_referrals.freetext_general">Specify:<span class="required">*</span></label>
            <textarea class="form-control" name="service_referrals.freetext_general"
                      id="service_referrals.freetext_general"
                      data-concept="1915^FREETEXT GENERAL^99DCT"></textarea>
        </div>
    </fieldset>
</div>

<div class="section">
    <h3>Past Medical History</h3>

    <div class="form-group">
        <label for="review_of_medical_history">
            Prior history of breast cancer?<span class="required">*</span>
        </label>
        <select class="form-control" id="review_of_medical_history" name="with-tmp.review_of_medical_history"
                required="required" data-concept="6245^REVIEW OF MEDICAL HISTORY^99DCT">
            <option value="">...</option>
            <option value="6544^BREAST CANCER^99DCT">Yes</option>
            <option value="with-temp.NO">No</option>
        </select>
    </div>

    <div class="form-group">
        <label for="previous_radiation_location">
            Previous history of radiation to the chest?<span class="required">*</span>
        </label>
        <select class="form-control" id="previous_radiation_location" name="with-temp.previous_radiation_location"
                required="required" data-concept="8263^PREVIOUS RADIATION LOCATION^99DCT">
            <option value="">...</option>
            <option value="1349^CHEST^99DCT">Yes</option>
            <option value="with-temp.NO">No</option>
        </select>
    </div>

    <div class="form-group">
        <label for="ever_smoked_cigarettes">
            Do you presently, or have you in the past smoked cigarettes?<span class="required">*</span>
        </label>
        <select class="form-control" id="ever_smoked_cigarettes" name="ever_smoked_cigarettes"
                required="required" data-concept="6473^EVER SMOKED CIGARETTES^99DCT">
            <option value="">...</option>
            <option value="1065^YES^99DCT">Yes</option>
            <option value="1066^NO^99DCT">No</option>
        </select>
    </div>

    <div class="form-group">
        <label for="have_you_ever_drunk_alcohol">
            Do you presently, or have you in the past consumed alcohol?<span class="required">*</span>
        </label>
        <select class="form-control" id="have_you_ever_drunk_alcohol" name="have_you_ever_drunk_alcohol"
                required="required" data-concept="6474^HAVE YOU EVER DRUNK ALCOHOL^99DCT">
            <option value="">...</option>
            <option value="1065^YES^99DCT">Yes</option>
            <option value="1066^NO^99DCT">No</option>
        </select>
    </div>

    <div class="form-group">
        <label for="diagnosis_based_on_biopsy">Have you ever had a breast biopsy?<span class="required">*</span></label>
        <select class="form-control" id="diagnosis_based_on_biopsy" name="with-temp.diagnosis_based_on_biopsy"
                required="required" data-concept="6509^DIAGNOSIS BASED ON BIOPSY TYPE^99DCT">
            <option value="">...</option>
            <option value="8184^BREAST BIOPSY^99DCT">Yes</option>
            <option value="with-temp.NO">No</option>
        </select>
    </div>

    <div class="form-group">
        <label for="history_of_surgeries">Have you ever had breast surgery?<span class="required">*</span></label>
        <select class="form-control" id="history_of_surgeries" name="with-tmp.history_of_surgeries"
                required="required" data-concept="6478^HISTORY OF SURGERIES^99DCT">
            <option value="">...</option>
            <option value="8251^BREAST^99DCT">Yes</option>
            <option value="with-temp.NO">No</option>
        </select>
    </div>
</div>

<div class="section">
    <h3>Gynecologic History</h3>

    <div class="form-group">
        <label for="age_of_menarche">
            Age of menarche (first period)?<span class="required">*</span>
        </label>

        <div>
            <small><i>Menarche is the first menstrual cycle, or first menstrual bleeding, in female humans.</i></small>
        </div>
        <input class="form-control isDecimal" id="age_of_menarche" name="age_of_menarche" type="number"
               required="required" data-concept="8185^AGE OF MENARCHE^99DCT">
    </div>

    <div class="form-group">
        <label for="gravida">Number of previous pregnancies?<span class="required">*</span></label><br/>

        <div>
            <small><i>If client has never been pregnant, enter '0'.</i></small>
        </div>
        <input class="form-control isDecimal gravida" id="gravida" name="gravida" type="number"
               required="required" data-concept="5624^GRAVIDA^99DCT">
    </div>

    <div class="form-group relevant_gravida">
        <label for="age_of_first_pregnancy">
            Age at first pregnancy?<span class="required">*</span>
        </label>

        <div>
            <small><i>What is the age of first pregnancy?</i></small>
        </div>
        <input class="form-control isDecimal" id="age_of_first_pregnancy" name="age_of_first_pregnancy" type="number"
               required="required" data-concept="8186^AGE OF FIRST PREGNANCY^99DCT">
    </div>

    <div class="form-group relevant_gravida">
        <label for="parity">
            Number of previous deliveries?<span class="required">*</span>
        </label>

        <div>
            <small><i>The number of children a woman has delivered?</i></small>
        </div>
        <input class="form-control isDecimal lessThanGravida" id="parity" name="parity" type="number"
               required="required" data-concept="1053^PARITY^99DCT">
    </div>

    <div class="form-group relevant_parity">
        <label for="mother_breast_feeding_history">Did you breastfeed your children?</label>
        <select class="form-control" id="mother_breast_feeding_history"
                name="mother_breast_feeding_history"
                required="required" data-concept="8187^MOTHER'S BREAST FEEDING HISTORY^99DCT">
            <option value="">...</option>
            <option value="1065^YES^99DCT">Yes</option>
            <option value="1066^NO^99DCT">No</option>
        </select>
    </div>

    <div class="form-group">
        <label for="menstruation_status">
            How are your menstrual periods?<span class="required">*</span>
        </label>

        <div>
            <small><i>Screener to select one best option.</i></small>
        </div>
        <select class="form-control" id="menstruation_status" name="menstruation_status"
                required="required" data-concept="2061^MENSTRUATION STATUS^99DCT">
            <option value="">...</option>
            <option value="1115^NORMAL^99DCT">Normal</option>
            <option value="1116^ABNORMAL^99DCT">Abnormal periods</option>
            <option value="2060^AMENORRHEA^99DCT">Completely absent</option>
            <option value="7023^PRE-MENOPAUSAL^99DCT">Pre-menopausal</option>
            <option value="5990^MENOPAUSAL^99DCT">Menopausal</option>
            <option value="6496^POST-MENOPAUSAL^99DCT">Post-menopausal</option>
            <option value="6497^DYSFUNCTIONAL UTERINE BLEEDING^99DCT">Abnormal bleeding not related to periods</option>
        </select>
    </div>

    <div class="form-group last_menstrual_period_date">
        <label for="last_menstrual_period_date">
            First day of your last period (LMP)?<span class="required">*</span>
        </label>
        <input class="form-control datepicker nonFutureDate past-date" id="last_menstrual_period_date"
               name="last_menstrual_period_date"
               type="text" required="required" data-concept="1836^LAST MENSTRUAL PERIOD DATE^99DCT">
    </div>

    <div class="form-group reason_for_lack_of_period">
        <label for="reason_for_lack_of_period">Do you know why you are not having your period?</label>
        <select class="form-control" id="reason_for_lack_of_period" name="reason_for_lack_of_period"
                required="required" data-concept="8252^REASON FOR LACK OF PERIOD^99DCT">
            <option value="">...</option>
            <option value="1484^PREGNANT^99DCT">Pregnant</option>
            <option value="1402^BREASTFED^99DCT">Breastfeeding</option>
            <option value="6496^POST-MENOPAUSAL^99DCT">Due to age</option>
            <option value="1624^DO NOT KNOW^99DCT">Do not know</option>
            <option value="5622^OTHER NON-CODED^99DCT">Other</option>
        </select>
    </div>

    <div class="section">
        <h4>Select all family planning methods the patient has ever used?<span class="required">*</span></h4>

        <fieldset name="8253^FAMILY PLANNING METHOD EVER USED^99DCT">
            <div class="form-group">
                <label class="font-normal">
                    <input id="family_planning_method_ever_used.condoms" type="checkbox"
                           data-concept="8253^FAMILY PLANNING METHOD EVER USED^99DCT"
                           value="190^CONDOMS^99DCT"/>
                    Condoms
                </label>
            </div>
            <div class="form-group">
                <label class="font-normal">
                    <input id="family_planning_method_ever_used.female_sterilization" type="checkbox"
                           data-concept="8253^FAMILY PLANNING METHOD EVER USED^99DCT"
                           value="5276^FEMALE STERILIZATION^99DCT"/>
                    Sterilization/Hysterectomy
                </label>
            </div>
            <div class="form-group">
                <label class="font-normal">
                    <input id="family_planning_method_ever_used.intrauterine_device" type="checkbox"
                           data-concept="8253^FAMILY PLANNING METHOD EVER USED^99DCT"
                           value="5275^INTRAUTERINE DEVICE^99DCT"/>
                    Intrauterine device
                </label>
            </div>
            <div class="form-group">
                <label class="font-normal">
                    <input id="family_planning_method_ever_used.diaphragm" type="checkbox"
                           data-concept="8253^FAMILY PLANNING METHOD EVER USED^99DCT"
                           value="5278^DIAPHRAGM^99DCT"/>
                    Diaphragm/Cervical cap
                </label>
            </div>
            <div class="form-group">
                <label class="font-normal">
                    <input id="family_planning_method_ever_used.via_oral_contraceptive_pills" type="checkbox"
                           data-concept="8253^FAMILY PLANNING METHOD EVER USED^99DCT"
                           value="5274^FAMILY PLANNING VIA ORAL CONTRACEPTIVE PILLS^99DCT"/>
                    Oral contraceptive pills
                </label>
            </div>
            <div class="form-group">
                <label class="font-normal">
                    <input id="family_planning_method_ever_used.natural_family_planning" type="checkbox"
                           data-concept="8253^FAMILY PLANNING METHOD EVER USED^99DCT"
                           value="5277^NATURAL FAMILY PLANNING^99DCT"/>
                    Natural family planning
                </label>
            </div>
            <div class="form-group">
                <label class="font-normal">
                    <input id="family_planning_method_ever_used.injectable_contraceptives" type="checkbox"
                           data-concept="8253^FAMILY PLANNING METHOD EVER USED^99DCT"
                           value="5279^INJECTABLE CONTRACEPTIVES^99DCT"/>
                    Injectable hormones
                </label>
            </div>
            <div class="form-group">
                <label class="font-normal">
                    <input class="has-freetext" id="family_planning_method_ever_used.other_non_coded" type="checkbox"
                           data-concept="8253^FAMILY PLANNING METHOD EVER USED^99DCT"
                           value="5622^OTHER NON-CODED^99DCT"/>
                    Other
                </label>
            </div>
            <div class="form-group">
                <label class="font-normal">
                    <input id="family_planning_method_ever_used.none" type="checkbox"
                           data-concept="8253^FAMILY PLANNING METHOD EVER USED^99DCT"
                           value="1624^DO NOT KNOW^99DCT"/>
                    None
                </label>
            </div>
            <div class="form-group">
                <label class="font-normal">
                    <input id="family_planning_method_ever_used.do_not_know" type="checkbox"
                           data-concept="8253^FAMILY PLANNING METHOD EVER USED^99DCT"
                           value="1107^NONE^99DCT"/>
                    Don't know
                </label>
            </div>
            <div class="form-group freetext">
                <label for="family_planning_method_ever_used.freetext_general">
                    Specify:<span class="required">*</span>
                </label>
                <textarea class="form-control" name="family_planning_method_ever_used.freetext_general"
                          id="family_planning_method_ever_used.freetext_general"
                          data-concept="1915^FREETEXT GENERAL^99DCT"></textarea>
            </div>
        </fieldset>
    </div>
</div>

<div class="section">
    <h3>Family Breast Cancer History</h3>

    <div class="section" data-concept="6805^FAMILY CHRONIC ILLNESSNESS HISTORY, DETAILED^99DCT">

        <div class="form-group">
            <label for="family_chronic_illnesses_history">
                Any history of breast cancer in the family?<span class="required">*</span>
            </label>
            <select class="form-control" id="family_chronic_illnesses_history"
                    name="with-temp.family_chronic_illnesses_history"
                    required="required" data-concept="6802^FAMILY CHRONIC ILLNESSES HISTORY^99DCT">
                <option value="">...</option>
                <option value="6544^BREAST CANCER^99DCT">Yes</option>
                <option value="with-temp.NO">No</option>
            </select>
        </div>

        <div class="form-group relevant_family_chronic_illnesses_history">
            <label>
                Relative(s) in the family with history of breast cancer?<span class="required">*</span>
            </label>
            <fieldset name="8254^FAMILY MEMBER WITH CHRONIC ILLNESSES HISTORY^99DCT">
                <div class="form-group">
                    <label class="font-normal">
                        <input id="family_member_with_chronic_illnesses_history.sibling" type="checkbox"
                               data-concept="8254^FAMILY MEMBER WITH CHRONIC ILLNESSES HISTORY^99DCT"
                               value="972^SIBLING^99DCT"/>
                        Sibling(s)
                    </label>
                </div>
                <div class="form-group">
                    <label class="font-normal">
                        <input id="family_member_with_chronic_illnesses_history.mother" type="checkbox"
                               data-concept="8254^FAMILY MEMBER WITH CHRONIC ILLNESSES HISTORY^99DCT"
                               value="970^MOTHER^99DCT"/>
                        Mother
                    </label>
                </div>
                <div class="form-group">
                    <label class="font-normal">
                        <input id="family_member_with_chronic_illnesses_history.maternal_aunt" type="checkbox"
                               data-concept="8254^FAMILY MEMBER WITH CHRONIC ILLNESSES HISTORY^99DCT"
                               value="2037^MATERNAL AUNT^99DCT"/>
                        Maternal aunt(s)
                    </label>
                </div>
                <div class="form-group">
                    <label class="font-normal">
                        <input id="family_member_with_chronic_illnesses_history.paternal_aunt" type="checkbox"
                               data-concept="8254^FAMILY MEMBER WITH CHRONIC ILLNESSES HISTORY^99DCT"
                               value="2038^PATERNAL AUNT^99DCT"/>
                        Paternal aunt(s)
                    </label>
                </div>
                <div class="form-group">
                    <label class="font-normal">
                        <input id="family_member_with_chronic_illnesses_history.other_non_coded" type="checkbox"
                               data-concept="8254^FAMILY MEMBER WITH CHRONIC ILLNESSES HISTORY^99DCT"
                               value="5622^OTHER NON-CODED^99DCT"/>
                        Other
                    </label>
                </div>
            </fieldset>
        </div>

        <div class="form-group relevant_family_chronic_illnesses_history">
            <label for="number_of_family_members_with_chronic_illnesses_history">
                Number of family members with history of breast cancer?<span class="required">*</span>
            </label>
            <input class="form-control isDecimal" id="number_of_family_members_with_chronic_illnesses_history"
                   name="number_of_family_members_with_chronic_illnesses_history"
                   type="number" required="required"
                   data-concept="8255^NUMBER OF FAMILY MEMBERS WITH CHRONIC ILLNESSES HISTORY^99DCT">
        </div>
    </div>
</div>

<div class="section">
    <h4>Symptoms related to breast?<span class="required">*</span></h4>
    <fieldset name="6492^REVIEW OF SYSTEMS - BREAST^99DCT">
        <div class="form-group">
            <label class="font-normal">
                <input id="review_of_systems_breast.negative" type="checkbox"
                       data-concept="6492^REVIEW OF SYSTEMS - BREAST^99DCT" value="664^NEGATIVE^99DCT"/>
                No complaints
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="review_of_systems_breast.breast_pain" type="checkbox"
                       data-concept="6492^REVIEW OF SYSTEMS - BREAST^99DCT" value="6667^PAIN - BREAST^99DCT"/>
                Breast pain
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="review_of_systems_breast.breast_lumps" type="checkbox"
                       data-concept="6492^REVIEW OF SYSTEMS - BREAST^99DCT" value="6250^BREAST LUMPS^99DCT"/>
                Breast mass
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="review_of_systems_breast.nipple_discharge" type="checkbox"
                       data-concept="6492^REVIEW OF SYSTEMS - BREAST^99DCT" value="6493^NIPPLE DISCHARGE^99DCT"/>
                Nipple discharge
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="review_of_systems_breast.breast_skin_changes" type="checkbox"
                       data-concept="6492^REVIEW OF SYSTEMS - BREAST^99DCT" value="6499^BREAST SKIN CHANGES^99DCT"/>
                Breast skin changes
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="review_of_systems_breast.mastitis" type="checkbox"
                       data-concept="6492^REVIEW OF SYSTEMS - BREAST^99DCT" value="115^MASTITIS^99DCT"/>
                Breast skin inflammation / abscess
            </label>
        </div>
    </fieldset>

    <div class="form-group breast_pain_duration">
        <label for="breast_pain_duration">Breast pain duration?</label>
        <select class="form-control" id="breast_pain_duration" name="breast_pain_duration"
                required="required" data-concept="8256^BREAST PAIN DURATION^99DCT">
            <option value="">...</option>
            <option value="1072^DAYS^99DCT">Days</option>
            <option value="1073^WEEKS^99DCT">Weeks</option>
            <option value="1074^MONTHS^99DCT">Months</option>
            <option value="1079^CONTINUOUS^99DCT">Continous</option>
        </select>
    </div>

    <div class="form-group breast_mass_duration">
        <label for="breast_mass_duration">Breast mass duration?</label>
        <select class="form-control" id="breast_mass_duration" name="breast_mass_duration"
                required="required" data-concept="8257^BREAST MASS DURATION^99DCT">
            <option value="">...</option>
            <option value="1072^DAYS^99DCT">Days</option>
            <option value="1073^WEEKS^99DCT">Weeks</option>
            <option value="1074^MONTHS^99DCT">Months</option>
            <option value="1079^CONTINUOUS^99DCT">Continous</option>
        </select>
    </div>

    <div class="form-group nipple_discharge_duration">
        <label for="nipple_discharge_duration">Nipple discharge duration?</label>
        <select class="form-control" id="nipple_discharge_duration" name="nipple_discharge_duration"
                required="required" data-concept="8258^NIPPLE DISCHARGE DURATION^99DCT">
            <option value="">...</option>
            <option value="1072^DAYS^99DCT">Days</option>
            <option value="1073^WEEKS^99DCT">Weeks</option>
            <option value="1074^MONTHS^99DCT">Months</option>
            <option value="1079^CONTINUOUS^99DCT">Continous</option>
        </select>
    </div>

    <div class="form-group breast_skin_changes_duration">
        <label for="breast_skin_changes_duration">Breast sking changes duration?</label>
        <select class="form-control" id="breast_skin_changes_duration" name="breast_skin_changes_duration"
                required="required" data-concept="8260^BREAST SKIN CHANGES DURATION^99DCT">
            <option value="">...</option>
            <option value="1072^DAYS^99DCT">Days</option>
            <option value="1073^WEEKS^99DCT">Weeks</option>
            <option value="1074^MONTHS^99DCT">Months</option>
            <option value="1079^CONTINUOUS^99DCT">Continous</option>
        </select>
    </div>

    <div class="form-group breast_inflammation_duration">
        <label for="breast_inflammation_duration">Breast skin inflammation / abscess duration?</label>
        <select class="form-control" id="breast_inflammation_duration" name="breast_inflammation_duration"
                required="required" data-concept="8259^BREAST INFLAMMATION DURATION^99DCT">
            <option value="">...</option>
            <option value="1072^DAYS^99DCT">Days</option>
            <option value="1073^WEEKS^99DCT">Weeks</option>
            <option value="1074^MONTHS^99DCT">Months</option>
            <option value="1079^CONTINUOUS^99DCT">Continuous</option>
        </select>
    </div>
</div>

<div class="section">
    <h3>Physical Examination</h3>

    <div class="form-group">
        <label for="systolic_blood_pressure">
            Systolic blood pressure (mmHg):<span class="required">*</span>
        </label>
        <input class="form-control systolicBloodPressure" id="systolic_blood_pressure"
               name="systolic_blood_pressure" type="number"
               placeholder="Please record today's SBP" data-concept="5085^SYSTOLIC BLOOD PRESSURE^99DCT"
               required="required">
    </div>
    <div class="form-group">
        <label for="diastolic_blood_pressure">
            Diastolic blood pressure (mmHg):<span class="required">*</span>
        </label>
        <input class="form-control diastolicBloodPressure lessThanSystolic" id="diastolic_blood_pressure"
               name="diastolic_blood_pressure" type="number"
               placeholder="Please record today's DBP" data-concept="5086^DIASTOLIC BLOOD PRESSURE^99DCT"
               required="required">
    </div>
    <div class="form-group">
        <label for="pulse">Pulse rate (per minute):<span class="required">*</span></label>
        <input class="form-control" id="pulse" name="pulse" type="number"
               placeholder="Please record today's pulse" required="required"
               data-concept="5087^PULSE^99DCT">
    </div>
    <div class="form-group">
        <label for="pulse">Respiratory rate:<span class="required">*</span></label>
        <input class="form-control" id="respiratory_rate" name="respiratory_rate" type="number"
               placeholder="Please record today's respiratory rate" required="required"
               data-concept="5242^RESPIRATORY RATE^99DCT">
    </div>
    <div class="form-group">
        <label for="temperature_c">Temperature (centigrade):<span class="required">*</span></label>
        <input class="form-control" id="temperature_c" name="temperature_c" type="number"
               placeholder="Please record today's temperature" required="required"
               data-concept="5088^TEMPERATURE (C)^99DCT">
    </div>
    <div class="form-group">
        <label for="weight_kg">Weight (kg):<span class="required">*</span></label>
        <input class="form-control" id="weight_kg" name="weight_kg" type="number"
               placeholder="Please record today's weight" required="required"
               data-concept="5089^WEIGHT (KG)^99DCT">
    </div>
    <div class="form-group">
        <label for="height_cm">Height (cm):<span class="required">*</span></label>
        <input class="form-control" id="height_cm" name="height_cm" type="number"
               placeholder="Please record today's height" required="required"
               data-concept="5090^HEIGHT (CM)^99DCT">
    </div>

    <div class="section">
        <div class="form-group">
            <label for="body_surface_area">Body surface area (m^2)</label>
            <input class="form-control" id="body_surface_area" name="body_surface_area" type="number"
                   disabled="disabled"
                   data-concept="980^BODY SURFACE AREA^99DCT">
        </div>
    </div>
</div>

<div class="section">
    <h3>Breast Exam Findings</h3>

    <div class="section repeat breast_exam_findings_detailed" id="breast_exam_findings_detailed"
         data-counter="1" data-concept="8269^BREAST EXAM FINDINGS, DETAILED^99DCT"
         data-name="breast_exam_findings_detailed">
        <div class="form-group">
            <label for="breast_exam_findings">
                Breast exam findings?<span class="required">*</span>
            </label>
            <select class="form-control" id="breast_exam_findings" required="required"
                    name="breast_exam_findings" data-concept="6251^BREAST EXAM FINDINGS^99DCT">
                <option value="">...</option>
                <option value="1118^NOT DONE^99DCT">Not done</option>
                <option value="1115^NORMAL^99DCT">Normal</option>
                <option value="6250^BREAST LUMPS^99DCT">Breast mass</option>
                <option value="6499^BREAST SKIN CHANGES^99DCT">Breast skin changes</option>
                <option value="115^MASTITIS^99DCT">Breast skin inflammation / abscess</option>
                <option value="8188^CALOR^99DCT">Abnormally warm</option>
                <option value="8189^PEAU DORANGE^99DC">Peau D'Orange</option>
            </select>
        </div>
        <div class="form-group relevant_breast_exam_findings">
            <label for="laterality">
                Which breast has finding?:<span class="required">*</span>
            </label>
            <select class="form-control" id="laterality" required="required"
                    name="laterality" data-concept="8264^LATERALITY^99DCT">
                <option value="">...</option>
                <option value="5141^RIGHT^99DCT">Right</option>
                <option value="5139^LEFT^99DCT">Left</option>
            </select>
        </div>
        <div class="form-group relevant_breast_exam_findings">
            <label for="anatomic_location_description">
                Specific location?<span class="required">*</span>
            </label>
            <select class="form-control" id="anatomic_location_description" required="required"
                    name="anatomic_location_description" data-concept="8268^ANATOMIC LOCATION DESCRIPTION^99DCT">
                <option value="">...</option>
                <option value="6589^UPPER INNER QUADRANT^99DCT">Upper inner quadrant</option>
                <option value="6591^UPPER OUTER QUADRANT^99DCT">Upper outer quadrant</option>
                <option value="6590^LOWER INNER QUADRANT^99DCT">Lower inner quadrant</option>
                <option value="6592^LOWER OUTER QUADRANT^99DCT">Lower outer quadrant</option>
            </select>
        </div>
    </div>
</div>

<div class="section">
    <h4>Lymph node exam findings?<span class="required">*</span></h4>
    <fieldset name="1121^LYMPH NODE EXAM FINDINGS^99DCT">
        <div class="form-group">
            <label class="font-normal">
                <input id="lymph_node_exam_findings.submandibular" type="checkbox"
                       data-concept="1121^LYMPH NODE EXAM FINDINGS^99DCT" value="504^SUBMANDIBULAR^99DCT"/>
                Submandibular
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="lymph_node_exam_findings.supraclavicular" type="checkbox"
                       data-concept="1121^LYMPH NODE EXAM FINDINGS^99DCT" value="505^SUPRACLAVICULAR^99DCT"/>
                Supraclavicular
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="lymph_node_exam_findings.cervical" type="checkbox"
                       data-concept="1121^LYMPH NODE EXAM FINDINGS^99DCT" value="643^CERVICAL^99DCT"/>
                Cervical
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="lymph_node_exam_findings.axillary" type="checkbox"
                       data-concept="1121^LYMPH NODE EXAM FINDINGS^99DCT" value="5112^AXILLARY^99DCT"/>
                Axillary
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="lymph_node_exam_findings.lymphadenopathy" type="checkbox"
                       data-concept="1121^LYMPH NODE EXAM FINDINGS^99DCT" value="161^LYMPHADENOPATHY^99DCT"/>
                Generalized lympadenopathy
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="lymph_node_exam_findings.normal" type="checkbox"
                       data-concept="1121^LYMPH NODE EXAM FINDINGS^99DCT" value="1115^NORMAL^99DCT"/>
                Normal
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="lymph_node_exam_findings.not_done" type="checkbox"
                       data-concept="1121^LYMPH NODE EXAM FINDINGS^99DCT" value="1118^NOT DONE^99DCT"/>
                Not done
            </label>
        </div>
    </fieldset>
</div>

<div class="section">
    <h3>Skin Exams Findings</h3>

    <div class="section repeat skin_exam_findings_detailed" id="skin_exam_findings_detailed"
         data-counter="1" data-concept="8272^SKIN EXAM FINDINGS, DETAILED^99DCT"
         data-name="skin_exam_findings_detailed">
        <div class="form-group">
            <label for="skin_exam_findings">
                Skin exam findings?<span class="required">*</span>
            </label>
            <select class="form-control" id="skin_exam_findings" required="required"
                    name="skin_exam_findings" data-concept="1120^SKIN EXAM FINDINGS^99DCT">
                <option value="">...</option>
                <option value="1118^NOT DONE^99DCT">Not done</option>
                <option value="1115^NORMAL^99DCT">Normal</option>
                <option value="582^MASS, OTHER^99DCT">Mass</option>
                <option value="8188^CALOR^99DCT">Abnormally warm</option>
            </select>
        </div>
        <div class="form-group relevant_skin_exam_findings">
            <label for="skin_exam_findings_detailed_body_part">
                Body part with finding?:<span class="required">*</span>
            </label>
            <select class="form-control" id="skin_exam_findings_detailed_body_part" required="required"
                    name="skin_exam_findings_detailed_body_part" data-concept="8265^BODY PART^99DCT">
                <option value="">...</option>
                <option value="6599^FACE^99DCT">Face</option>
                <option value="6598^NECK^99DCT">Neck</option>
                <option value="1237^UPPER EXTREMITIES^99DCT">Arm</option>
                <option value="1236^LOWER EXTREMITIES^99DCT">Leg</option>
                <option value="1349^CHEST^99DCT">Chest</option>
                <option value="6601^BACK^99DCT">Back</option>
                <option value="1350^ABDOMINAL^99DCT">Abdomen</option>
                <option value="6600^GENITALS^99DCT">Genitals</option>
                <option value="6597^BUTTOCKS^99DCT">Buttocks</option>
            </select>
        </div>
        <div class="form-group relevant_skin_exam_findings">
            <label for="skin_exam_findings_detailed_laterality">
                Specific location?<span class="required">*</span>
            </label>
            <select class="form-control" id="skin_exam_findings_detailed_laterality" required="required"
                    name="skin_exam_findings_detailed_laterality" data-concept="8264^LATERALITY^99DCT">
                <option value="">...</option>
                <option value="5139^LEFT^99DCT">Left</option>
                <option value="5141^RIGHT^99DCT">Right</option>
                <option value="1175^NOT APPLICABLE^99DCT">Not applicable</option>
            </select>
        </div>
        <div class="form-group relevant_skin_exam_findings_mass">
            <label for="mass_measurement_in_cm_first_direction">Mass measurement in cm, first direction:</label>
            <input class="form-control" id="mass_measurement_in_cm_first_direction"
                   name="mass_measurement_in_cm_first_direction" type="number"
                   data-concept="8270^MASS MEASUREMENT IN CM, FIRST DIRECTION^99DCT">
        </div>
        <div class="form-group relevant_skin_exam_findings_mass">
            <label for="mass_measurement_in_cm_second_direction">Mass measurement in cm, second direction:</label>
            <input class="form-control" id="mass_measurement_in_cm_second_direction"
                   name="mass_measurement_in_cm_second_direction" type="number"
                   data-concept="8271^MASS MEASUREMENT IN CM, SECOND DIRECTION^99DCT">
        </div>
    </div>
</div>

<div class="section">
    <h4>Select all referrals made during this visit:<span class="required">*</span></h4>
    <fieldset name="1272^REFERRALS ORDERED^99DCT">
        <div class="form-group">
            <label class="font-normal">
                <input id="referrals_ordered.referral_to_pathology" type="checkbox"
                       data-concept="1272^REFERRALS ORDERED^99DCT" value="6573^REFERRAL TO PATHOLOGY^99DCT">
                Pathology
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="referrals_ordered.referral_to_surgery" type="checkbox"
                       data-concept="1272^REFERRALS ORDERED^99DCT" value="6571^REFERRAL TO SURGERY^99DCT">
                Surgery
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="referrals_ordered.radiology" type="checkbox"
                       data-concept="1272^REFERRALS ORDERED^99DCT" value="6572^RADIOLOGY^99DCT">
                Radiology
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="referrals_ordered.oncology_services" type="checkbox"
                       data-concept="1272^REFERRALS ORDERED^99DCT" value="8053^ONCOLOGY SERVICES^99DCT">
                Oncology
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="referrals_ordered.moi_teaching_and_referral_hospital" type="checkbox"
                       data-concept="1272^REFERRALS ORDERED^99DCT"
                       value="1274^MOI TEACHING AND REFERRAL HOSPITAL^99DCT">
                MTRH
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input class="has-freetext" id="referrals_ordered.other_non_coded" type="checkbox"
                       data-concept="1272^REFERRALS ORDERED^99DCT" value="5622^OTHER NON-CODED^99DCT">
                Other
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="referrals_ordered.none" type="checkbox"
                       data-concept="1272^REFERRALS ORDERED^99DCT" value="1107^NONE^99DCT">
                None
            </label>
        </div>
        <div class="form-group freetext">
            <label for="referrals_ordered.freetext_general">
                Specify:<span class="required">*</span>
            </label>
            <textarea class="form-control" name="referrals_ordered.freetext_general"
                      id="referrals_ordered.freetext_general"
                      data-concept="1915^FREETEXT GENERAL^99DCT"></textarea>
        </div>
    </fieldset>
</div>

<div class="section relevant_referral_ordered">
    <h4>Reasons for referral<span class="required">*</span></h4>
    <fieldset name="2327^REASONS FOR REFERRAL^99DCT">
        <div class="form-group">
            <label class="font-normal">
                <input id="reasons_for_referral.fine_needle_aspiration_nos" type="checkbox"
                       data-concept="2327^REASONS FOR REFERRAL^99DCT" value="7190^FINE NEEDLE ASPIRATION, NOS^99DCT">
                Fine needle aspiration (FNA)
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="reasons_for_referral.core_needle_biopsy" type="checkbox"
                       data-concept="2327^REASONS FOR REFERRAL^99DCT" value="6510^CORE NEEDLE BIOPSY^99DCT">
                Core needle biopsy
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="reasons_for_referral.excisional_or_surgical_biopsy" type="checkbox"
                       data-concept="2327^REASONS FOR REFERRAL^99DCT" value="6511^EXCISIONAL OR SURGICAL BIOPSY^99DCT">
                Excisional or surgical biopsy
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="reasons_for_referral.surgery" type="checkbox"
                       data-concept="2327^REASONS FOR REFERRAL^99DCT" value="7465^SURGERY^99DCT">
                Surgery
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="reasons_for_referral.debridement" type="checkbox"
                       data-concept="2327^REASONS FOR REFERRAL^99DCT" value="8262^DEBRIDEMENT^99DCT">
                Wound debridement
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="reasons_for_referral.ultrasound" type="checkbox"
                       data-concept="2327^REASONS FOR REFERRAL^99DCT" value="6502^ULTRASOUND^99DCT">
                Ultrasound
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input class="has-freetext" id="reasons_for_referral.other_non_coded" type="checkbox"
                       data-concept="2327^REASONS FOR REFERRAL^99DCT" value="5622^OTHER NON-CODED^99DCT">
                Other
            </label>
        </div>
        <div class="form-group freetext">
            <label for="reasons_for_referral.freetext_general">
                Specify:<span class="required">*</span>
            </label>
            <textarea class="form-control" name="reasons_for_referral.freetext_general"
                      id="reasons_for_referral.freetext_general"
                      data-concept="1915^FREETEXT GENERAL^99DCT"></textarea>
        </div>
    </fieldset>
</div>

<div class="section">
    <div class="form-group">
        <label for="encounter.provider_id_select">Provider Name:</label>
        <input class="form-control" id="encounter.provider_id_select" type="text"
               placeholder="Start typing provider name here ...">
        <input class="form-control" name="encounter.provider_id_select" type="hidden">
    </div>

    <div class="form-group show_provider_id_text">
        <label for="encounter.provider_id">Enter provider's system-id:<span class="required">*</span></label>
        <input class="form-control checkDigit" id="encounter.provider_id" name="encounter.provider_id" type="text"
               placeholder="Or enter the provider system id here ..." required="required">
    </div>

    <div class="form-group">
        <label for="return_visit_date">Return visit date:</label>
        <input class="form-control datepicker checkFutureDate future-date" data-concept="5096^RETURN VISIT DATE^99DCT"
               id="return_visit_date" name="return_visit_date" type="text"
               readonly="readonly">
    </div>
</div>

</form>
</body>
<script type="text/javascript">

$(document).ready(function () {

    var dateFormat = "dd-mm-yy";
    var currentDate = $.datepicker.formatDate(dateFormat, new Date());
    var encounterDatetime = $('#encounter\\.encounter_datetime');
    if ($(encounterDatetime).val() == "") {
        $(encounterDatetime).val(currentDate);
    }

    $('#save_draft').click(function () {
        $(this).prop('disabled', true);
        document.saveDraft(this);
        $(this).prop('disabled', false);
    });

    $('#submit_form').click(function () {
        $(this).prop('disabled', true);
        document.submit();
        $(this).prop('disabled', false);
    });

    $('#breastcancer_form').validate({
        rules: {
            pulse: {
                number: true,
                range: [0, 230]
            },
            temperature_c: {
                number: true,
                range: [25, 43]
            },
            weight_kg: {
                number: true,
                range: [0, 250]
            },
            height_cm: {
                number: true,
                range: [10, 228]
            },
            age_of_menarche: {
                number: true,
                range: [8, 23]
            },
            gravida: {
                digits: true,
                min: 0
            },
            parity: {
                digits: true,
                min: 0
            },
            age_of_first_pregnancy: {
                digits: true,
                range: [8, 50]
            },
            respiratory_rate: {
                digits: true,
                min: 0
            },
            mass_measurement_in_cm_second_direction: {
                number: true,
                min: 0
            },
            mass_measurement_in_cm_first_direction: {
                number: true,
                min: 0
            }
        }
    });

    var locationName = [
        {"val": "7", "label": "Chulaimbo"},
        {"val": "3", "label": "Turbo"},
        {"val": "17", "label": "Iten"},
        {"val": "2", "label": "Mosoriot"},
        {"val": "8", "label": "Webuye"},
        {"val": "9", "label": "Ampath MTRH"}
    ];
    $('#encounter\\.location_id').autocomplete({
        source: locationName,
        create: function (event, ui) {
            var location_val = $('input[name="encounter\\.location_id"]').val();
            $.each(locationName, function (i, elem) {
                if (elem.val == location_val) {
                    $('#encounter\\.location_id').val(elem.label)
                }
                ;
            });
        },
        select: function (event, ui) {
            $('input[name="encounter\\.location_id"]').val(ui.item.val);
            $('#encounter\\.location_id').val(ui.item.label);
            return false;
        }
    });

    var provider = [
        {"label": "Daurine Achieng Agumba", "val": "3419-9"},
        {"label": "Irene Chepkosgei	Kurgat", "val": "3420-7"},
        {"label": "Rose	Cheruto	Toroitich", "val": "3421-5"},
        {"label": "Mary	Kipkurui Kimosop", "val": "3422-3"},
        {"label": "Jacqueline Chemom Ndiema", "val": "3423-1"},
        {"label": "Grace Wanjiru Mwangi", "val": "3424-9"},
        {"label": "Collette	Mabia Palapala", "val": "3425-6"},
        {"label": "Dorice Erima	Wekesa", "val": "3426-4"},
        {"label": "Agnes Kagure	Boen", "val": "120-6"},
        {"label": "Linet Kerubo	Onyancha", "val": "3427-2"},
        {"label": "Delinah Muchai Tanui", "val": "1208-8"},
        {"label": "Hellen Mushimbi Indumbwe", "val": "1208-8"},
        {"label": "Lydia Cherugut Samoei", "val": "1525-5"},
        {"label": "Ruth	Kalunda	Nzili", "val": "1529-7"},
        {"label": "Lucy	Cheruto	Birgen", "val": "3428-0"},
        {"label": "Gratiah Nafuna Khaemba", "val": "1409-2"},
        {"label": "Leonida Chemutai	Mengich", "val": "1357-3"},
        {"label": "Ann Wangoi Maina", "val": "1412-6"},
        {"label": "Elkanah Omenge Orango", "val": "1474-6"},
        {"label": "Peter Mukhanadale Istura", "val": "1478-7"},
        {"label": "Hillary Mabeya", "val": "1476-1"},
        {"label": "Astrid Christoffersen Deb", "val": "1237-7"},
        {"label": "Philip Kipkirui Tonui", "val": "1485-7"},
        {"label": "Ann Jebet Ngelel", "val": "3613-7"},
        {"label": "Job Wekesa Wamukaya", "val": "3614-5"},
        {"label": "Joyce Chepkorir Chessum", "val": "3615-2"},
        {"label": "Monica Chelimo Rotich", "val": "3616-0"},
        {"label": "Penina Jerotich Biwott", "val": "3617-8"},
        {"label": "Peter Gachingi Kamau", "val": "3618-6"},
        {"label": "Phanice Jepkemoi Tomu", "val": "3619-4"},
        {"label": "Phyllis Jelagat Bartilol", "val": "3620-2"},
        {"label": "Roselyne Yatich", "val": "3621-0"},
        {"label": "Ruth Sego", "val": "3622-8"},
        {"label": "Yosabia Osebe Monari", "val": "3623-6"},
        {"label": "Philip Kipkirui Tonui", "val": "1485-7"}
    ];

    $('#encounter\\.provider_id_select').autocomplete({
        source: provider,
        create: function (event, ui) {
            var provider_val = $('input[name="encounter\\.provider_id_select"]').val();
            $.each(provider, function (i, elem) {
                if (elem.val == provider_val) {
                    $('#encounter\\.provider_id_select').val(elem.label)
                }
            });
        },
        select: function (event, ui) {
            $('input[name="encounter\\.provider_id_select"]').val(ui.item.val);
            $('#encounter\\.provider_id_select').val(ui.item.label);
            $('#encounter\\.provider_id').val(ui.item.val);
            $('.show_provider_id_text').hide();
            return false;
        }
    });
    $('#encounter\\.provider_id_select').change(function () {
        if ($('#encounter\\.provider_id_select').val() === '') {
            $('#encounter\\.provider_id').val('');
            $('.show_provider_id_text').show();
        }
    });

    /* Start - Checking that the diastolic blood pressure is less than the systolic blood pressure */
    $.validator.addMethod("lessThanSystolic", function (value, element) {
                if ($.fn.isNotRequiredAndEmpty(value, element)) return true;
                var systolicBloodPressure = parseInt($(element).closest('.section').find('.systolicBloodPressure').val());
                return (parseInt(value) <= systolicBloodPressure);
            }, "DBP cannot be more than SBP."
    );

    // attach 'lessThanSystolic' class to perform validation.
    jQuery.validator.addClassRules({
        lessThanSystolic: { lessThanSystolic: true }
    });
    /* End - lessThanSystolic*/

    /* Start - Checking that parity is less than gravida */
    $.validator.addMethod("lessThanGravida", function (value, element) {
                if ($.fn.isNotRequiredAndEmpty(value, element)) return true;
                var gravida = parseInt($(element).closest('.section').find('.gravida').val());
                return (parseInt(value) <= gravida);
            }, "Number of deliveries can't be more than number of pregnancies."
    );

    // attach 'lessThanGravida' class to perform validation.
    jQuery.validator.addClassRules({
        lessThanGravida: { lessThanGravida: true }
    });
    /* End - lessThanGravida*/

    /* Start - Female only breast cancer history */
    var $patientSex = $('#patient\\.sex');
    $patientSex.change(function () {
        var $womenOnly = $('.relevant-female');
        $patientSex.val() = 'F';
        if ($patientSex.val() != 'F') {
            $womenOnly.hide();
            $('body').html("" +
                    "<div class='section text-center'>" +
                    "    <h4>This form is only applicable to female patient. Please press back to close the form.</h4>" +
                    "</div>");
        } else {
            $womenOnly.show();
        }
    });
    $patientSex.trigger('change');
    /* End - Female only breast cancer history */

    /* Start - Toggle for gravida and parity based on gravida value */
    var $parity = $('#parity');
    var $gravida = $('#gravida');
    $gravida.change(function () {
        var gravidaValue = parseInt($gravida.val());
        var $parityRelevant = $('.relevant_parity');
        var $gravidaRelevant = $('.relevant_gravida');
        if (gravidaValue > 0) {
            $gravidaRelevant.show();
            $parity.trigger('change');
        } else {
            $parityRelevant.hide();
            $gravidaRelevant.hide();
        }
    });
    $gravida.trigger('change');

    $parity.change(function () {
        var parityValue = parseInt($parity.val());
        var $parityRelevant = $('.relevant_parity');
        if (parityValue > 0) {
            $parityRelevant.show();
        } else {
            $parityRelevant.hide();
        }
    });
    $parity.trigger('change');
    /* End - Toggle for gravida and parity based on gravida value */

    /* Start - Menstruation status skip logic */
    var $menstruationStatus = $('#menstruation_status');
    $menstruationStatus.change(function () {
        var menstruationStatusValue = $menstruationStatus.val();
        var $lackPeriod = $('.reason_for_lack_of_period');
        var $lastMenstruation = $('.last_menstrual_period_date');
        if (menstruationStatusValue == '6496^POST-MENOPAUSAL^99DCT' || menstruationStatusValue == '2060^AMENORRHEA^99DCT') {
            $lastMenstruation.hide();
            $lackPeriod.show();
        } else {
            $lastMenstruation.show();
            $lackPeriod.hide();
        }
    });
    $menstruationStatus.trigger('change');
    /* End - Menstruation status skip logic */

    /* Start - Checks that a field is a decimal */
    $.validator.addClassRules({
        systolicBloodPressure: {
            number: true,
            range: [50, 300]
        },
        diastolicBloodPressure: {
            number: true,
            range: [20, 150]
        }
    });
    /* End - Checks that a field is a decimal */

    /* Start - Toggle family illness detailed */
    var $familyHistory = $('#family_chronic_illnesses_history');
    $familyHistory.change(function () {
        var $relevantFamilyHistory = $('.relevant_family_chronic_illnesses_history');
        if ($familyHistory.val() == '6544^BREAST CANCER^99DCT') {
            $relevantFamilyHistory.show();
        } else {
            $relevantFamilyHistory.hide();
        }
    });
    $familyHistory.trigger('change');
    /* End - Toggle family illness detailed */

    /*  Start - Based on breast review show duration fields */
    var breastReviewChange = function (selectedElement) {
        var breastDuration = {
            "#review_of_systems_breast\\.breast_pain": ".breast_pain_duration",
            "#review_of_systems_breast\\.mastitis": ".breast_inflammation_duration",
            "#review_of_systems_breast\\.breast_lumps": ".breast_mass_duration",
            "#review_of_systems_breast\\.nipple_discharge": ".nipple_discharge_duration",
            "#review_of_systems_breast\\.breast_skin_changes": ".breast_skin_changes_duration"
        };
        $.each(breastDuration, function (k, v) {
            $(k).change(function () {
                if ($(k).is(':checked')) {
                    $(v).show();
                } else {
                    $(v).hide();
                }
            });
            $(k).trigger('change');
        });
    };
    breastReviewChange();
    /*  End - Based on breast review show duration fields */

    /* Start - Remove temporary information */
    $.fn.removeTemporaryData = function (idList) {
        $.each(idList, function (i, id) {
            var $element = $('#' + id);
            var elementValue = $element.val();
            if (elementValue == "with-temp.NO") {
                $element.removeAttr('data-concept');
            }
        });
        return true;
    };
    /* End - Remove temporary information */

    var referralValues = ['1107^NONE^99DCT'];
    var referralMessage = "If None is selected, it should be the only option.";
    $(':checkbox[data-concept="1272^REFERRALS ORDERED^99DCT"]').change(function () {
        showValidationMessages(validateAlone($(this), referralValues, referralMessage));
    });

    var familyPlanningValues = ['1624^DO NOT KNOW^99DCT', '1107^NONE^99DCT'];
    var familyPlanningMessage = "If None or Don't know is selected, it should be the only option.";
    $(':checkbox[data-concept="8253^FAMILY PLANNING METHOD EVER USED^99DCT"]').change(function () {
        showValidationMessages(validateAlone($(this), familyPlanningValues, familyPlanningMessage));
    });

    var breastReviewValues = ['664^NEGATIVE^99DCT'];
    var breastReviewMessage = "If No Complaints is selected, it should be the only option.";
    $(':checkbox[data-concept="6492^REVIEW OF SYSTEMS - BREAST^99DCT"]').change(function () {
        showValidationMessages(validateAlone($(this), breastReviewValues, breastReviewMessage));
    });

    var lymphNodeValues = ['1118^NOT DONE^99DCT', '1115^NORMAL^99DCT', '161^LYMPHADENOPATHY^99DCT'];
    var lymphNodeMessage = "If Normal, Not Done or Generalized lympadenopathy is selected, it should be the only option.";
    $(':checkbox[data-concept="1121^LYMPH NODE EXAM FINDINGS^99DCT"]').change(function () {
        showValidationMessages(validateAlone($(this), lymphNodeValues, lymphNodeMessage));
    });

    var idList = ['diagnosis_based_on_biopsy', 'history_of_surgeries', 'previous_radiation_location',
        'review_of_medical_history', 'family_chronic_illnesses_history'];

    $.fn.customValidationCheck = function () {
        var referral = $('fieldset[name="1272^REFERRALS ORDERED^99DCT"]');
        var lymphNode = $('fieldset[name="1121^LYMPH NODE EXAM FINDINGS^99DCT"]');
        var breastReview = $('fieldset[name="6492^REVIEW OF SYSTEMS - BREAST^99DCT"]');
        var familyPlanning = $('fieldset[name="8253^FAMILY PLANNING METHOD EVER USED^99DCT"]');
        var communication = $('fieldset[name="8250^COMMUNICATION CHANNEL OF KNOWING THE PROGRAM OR SERVICE^99DCT"]');
        var familyHistory = $('fieldset[name="8254^FAMILY MEMBER WITH CHRONIC ILLNESSES HISTORY^99DCT"]');
        var referredReason = $('fieldset[name="2327^REASONS FOR REFERRAL^99DCT"]');
        var errors = $.extend({},
                validateSelected(referral),
                validateSelected(lymphNode),
                validateSelected(breastReview),
                validateSelected(familyPlanning),
                validateSelected(communication),
                validateSelected(familyHistory),
                validateSelected(referredReason),
                validateAlone(referral, referralValues, referralMessage),
                validateAlone(lymphNode, lymphNodeValues, lymphNodeMessage),
                validateAlone(familyPlanning, familyPlanningValues, familyPlanningMessage),
                validateAlone(breastReview, breastReviewValues, breastReviewMessage));
        showValidationMessages(errors);
        return $.fn.removeTemporaryData(idList) && $.isEmptyObject(errors);
    };
    /* End - Example of calling above validation */

    /* Start - Breast exam findings */
    var breastExamFindingDetailed = function (selectedElement) {
        var allBreastExamFindings = $("select[name='breast_exam_findings']");
        $.each(allBreastExamFindings, function (index, object) {
            $(object).change(function () {
                var breastExamValue = $(this).val();
                var $breastExamFindingsRelevant = $(this).closest('.section').find('.relevant_breast_exam_findings');
                if (breastExamValue === '' || breastExamValue == '1118^NOT DONE^99DCT' || breastExamValue == '1115^NORMAL^99DCT') {
                    $breastExamFindingsRelevant.hide();
                } else {
                    $breastExamFindingsRelevant.show();
                }
            });
            $(object).trigger('change');
        });
    };
    breastExamFindingDetailed();
    /* End - Breast exam findings */

    /* Start - Disable adding section if not done is selected */
    // TODO: Need to add validation to prevent "NOT DONE" being selected when there are multiple repeat
    // Create something similar to the systole!
    // Get all select element and check if there's value that should be selected alone
    // Return message like the systole
    /* End - Disable adding section if not done is selected */

    /* Start - Skin exam findings */
    var skinExamFindingsDetailed = function (selectedElement) {
        var allSkinExamFindings = $("select[name='skin_exam_findings']");
        $.each(allSkinExamFindings, function (index, object) {
            $(object).change(function () {
                var skinExamValue = $(this).val();
                var $skinExamFindingsRelevant = $(this).closest('.section').find('.relevant_skin_exam_findings');
                var $skinExamFindingsRelevantMass = $(this).closest('.section').find('.relevant_skin_exam_findings_mass');
                if (skinExamValue == '582^MASS, OTHER^99DCT') {
                    $skinExamFindingsRelevant.show();
                    $skinExamFindingsRelevantMass.show();
                } else if (skinExamValue == '8188^CALOR^99DCT') {
                    $skinExamFindingsRelevant.show();
                    $skinExamFindingsRelevantMass.hide();
                } else {
                    $skinExamFindingsRelevant.hide();
                    $skinExamFindingsRelevantMass.hide();
                }
            });
            $(object).trigger('change');
        });
    };
    skinExamFindingsDetailed();
    /* End - Skin exam findings */

    /* Start - Disable adding section if not done is selected */
    // TODO: Need to add validation to prevent "NOT DONE" being selected when there are multiple repeat
    // Create something similar to the systole!
    // Get all select element and check if there's value that should be selected alone
    // Return message like the systole
    /* End - Disable adding section if not done is selected */

    /* Start - Referral NONE */
    var referred = $("input[data-concept='1272^REFERRALS ORDERED^99DCT']");
    var referredNone = referred.filter("[value='1107^NONE^99DCT']");
    var referredOther = referred.not("[value='1107^NONE^99DCT']");
    // affected element
    var referredRelevant = $('.relevant_referral_ordered');
    referredNone.change(function () {
        if ($(this).is(':checked')) {
            referredRelevant.hide();
        } else {
            if (referredOther.filter(":checked").length > 0) {
                referredRelevant.show();
            }
        }
    });
    referredNone.trigger("change");

    referredOther.change(function () {
        if (referredNone.filter(":checked").length <= 0
                && referredOther.filter(":checked").length > 0) {
            referredRelevant.show();
        } else {
            referredRelevant.hide();
        }
    });
    referredOther.trigger("change");
    /* End - Referral NONE */

    /* Start - BSA calculation */
    // we will bind this process to the change of weight and height
    var $weight = $("#weight_kg");
    var $height = $("#height_cm");
    var $bodySurface = $('#body_surface_area');
    $weight.change(function () {
        var weightValue = parseFloat($weight.val());
        var heightValue = parseFloat($height.val());
        if (weightValue !== 'NaN' && heightValue !== 'NaN') {
            var value = Math.sqrt((weightValue * heightValue) / 3600);
            $bodySurface.val(value);
        }
    });
    $weight.trigger("change");
    $height.change(function () {
        var weightValue = parseFloat($weight.val());
        var heightValue = parseFloat($height.val());
        if (weightValue !== 'NaN' && heightValue !== 'NaN') {
            var value = Math.sqrt((weightValue * heightValue) / 3600);
            $bodySurface.val(value);
        }
    });
    $height.trigger("change");
    /* End - BSA calculation */

});
</script>
</html>
