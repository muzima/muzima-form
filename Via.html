<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/muzima.css" rel="stylesheet">
    <link href="css/ui-darkness/jquery-ui-1.10.4.custom.min.css" rel="stylesheet">
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-ui-1.10.4.custom.min.js"></script>
    <script src="js/jquery.validate.min.js"></script>
    <script src="js/additional-methods.min.js"></script>
    <script src="js/muzima.js"></script>

    <title>CCSP VIA Form</title>
</head>

<body class="col-md-10 col-md-offset-1">
<div id="pre_populate_data"></div>
<form id="via_form" name="via_form">
<h2 class="text-center">CCSP VIA Form</h2>

<div class="section">
    <h3>Demographics</h3>

    <div class="form-group">
        <input class="form-control" id="patient.uuid" name="patient.uuid" type="hidden" readonly="readonly">
    </div>
    <div class="form-group">
        <label for="patient.medical_record_number">AMRS ID Number:</label>
        <input class="form-control" id="patient.medical_record_number" name="patient.medical_record_number" type="text"
               readonly="readonly" disabled="disabled">
    </div>
    <div class="form-group">
        <label for="patient.family_name">Family Name:</label>
        <input class="form-control" id="patient.family_name" name="patient.family_name" type="text" readonly="readonly"
               disabled="disabled">
    </div>
    <div class="form-group">
        <label for="patient.given_name">Given Name:</label>
        <input class="form-control" id="patient.given_name" name="patient.given_name" type="text" readonly="readonly"
               disabled="disabled">
    </div>
    <div class="form-group">
        <label for="patient.middle_name">Middle Name:</label>
        <input class="form-control" id="patient.middle_name" name="patient.middle_name" type="text" readonly="readonly"
               disabled="disabled">
    </div>
    <div class="form-group">
        <label for="patient.sex">Gender:</label>
        <select class="form-control" id="patient.sex" name="patient.sex">
            <option value="">...</option>
            <option value="M">Male</option>
            <option value="F">Female</option>
        </select>
    </div>
    <div class="form-group">
        <label for="patient.birthdate">Date Of Birth:</label>
        <input class="form-control datepicker nonFutureDate" id="patient.birthdate" name="patient.birthdate" type="date"
               readonly="readonly" disabled="disabled">
    </div>
</div>
<div class="section">
    <div class="form-group">
        <label for="encounter.location_id">Screening Site:<span class="required">*</span></label>
        <select class="form-control" name="encounter.location_id" id="encounter.location_id" required="required">
            <option value="">...</option>
            <option value="3">Turbo</option>
            <option value="2">Mosoriot</option>
            <option value="7">Chulaimbo</option>
            <option value="8">Webuye</option>
            <option value="9">Ampath MTRH</option>
            <option value="17">Iten</option>
        </select>
    </div>

    <div class="form-group">
        <label for="encounter.encounter_datetime">Encounter Date:<span class="required">*</span>
        </label>
        <input class="form-control datepicker nonFutureDate" id="encounter.encounter_datetime"
               name="encounter.encounter_datetime" type="text" readonly="readonly" encounter.encounter_datetime
               required="required">
    </div>
    <div class="form-group">
        <input class="form-control" id="encounter.form_uuid" name="encounter.form_uuid" type="hidden"
               required="required">
    </div>
</div>
<div class="section relevant_female">
    <div class="form-group">
        <label for="current_visit_type">
            What is the current visit type?<span class="required">*</span>
        </label>
        <select class="form-control" id="current_visit_type" name="current_visit_type"
                data-concept="1839^CURRENT VISIT TYPE^99DCT" required="required">
            <option value="">...</option>
            <option value="7850^INITIAL VISIT ^99DCT">New Visit</option>
            <option value="2345^FOLLOW-UP^99DCT">Revisit</option>
        </select>
    </div>

    <div class="form-group">
        <label for="menstruation_status">How are your menstrual periods?<span class="required">*</span></label>

        <div>
            <small><i>Screener to select one best option.</i></small>
        </div>
        <select class="form-control" id="menstruation_status" name="menstruation_status"
                data-concept="2061^MENSTRUATION STATUS^99DCT" required="required">
            <option value="">...</option>
            <option value="1115^NORMAL^99DCT">Normal</option>
            <option value="1116^ABNORMAL^99DCT">Abnormal periods</option>
            <option value="2060^AMENORRHEA^99DCT">Completely absent</option>
            <option value="7023^PRE-MENOPAUSAL^99DCT">Pre-menopausal</option>
            <option value="5990^MENOPAUSAL^99DCT">Menopausal</option>
            <option value="6496^POST-MENOPAUSAL^99DCT">Post-menopausal</option>
            <option value="6497^DYSFUNCTIONAL UTERINE BLEEDING^99DCT">Abnormal bleeding not related to periods</option>
        </select>
    </div>

    <div class="form-group last_menstrual_period_date">
        <label for="last_menstrual_period_date">First day of your last period (LMP)<span
                class="required">*</span></label>
        <input class="form-control datepicker nonFutureDate" id="last_menstrual_period_date"
               name="last_menstrual_period_date" type="date" data-concept="1836^LAST MENSTRUAL PERIOD DATE^99DCT"
               required="required">
    </div>

    <div class="form-group urine_pregnancy_test_qualitative">
        <label for="urine_pregnancy_test_qualitative">Urine pregnancy test<span class="required">*</span></label>

        <div>
            <small><i>Test that determines pregnancy status through measure of hormone content in urine.</i></small>
        </div>
        <select class="form-control" id="urine_pregnancy_test_qualitative" name="urine_pregnancy_test_qualitative"
                data-concept="45^URINE PREGNANCY TEST, QUALITATIVE^99DCT" required="required">
            <option value="">...</option>
            <option value="664^NEGATIVE^99DCT">Negative</option>
            <option value="703^POSITIVE^99DCT">Positive</option>
            <option value="1138^INDETERMINATE^99DCT">Indeterminate</option>
            <option value="1304^POOR SAMPLE QUALITY^99DCT">Poor sample quality</option>
            <option value="1118^NOT DONE^99DCT">Not Done</option>
            <option value="1958^REFUSAL^99DCT">Refusal</option>
        </select>
    </div>

    <div class="section reason_for_lack_of_period" data-concept="9169^REASON FOR LACK OF PERIOD, DETAILED^99DCT">
        <div class="form-group">
            <label for="reason_for_lack_of_period">
                Do you know why you are not having your period?<span class="required">*</span>
            </label>
            <select class="form-control has-other" id="reason_for_lack_of_period" name="reason_for_lack_of_period"
                    data-concept="8252^REASON FOR LACK OF PERIOD^99DCT" required="required">
                <option value="">...</option>
                <option value="1484^PREGNANT^99DCT">Pregnant</option>
                <option value="1402^BREASTFED^99DCT">Breastfeeding</option>
                <option value="6496^POST-MENOPAUSAL^99DCT">Due to age</option>
                <option value="1624^DO NOT KNOW^99DCT">Do not know</option>
                <option value="5622^OTHER NON-CODED^99DCT">Other</option>
            </select>
        </div>

        <div class="form-group freetext">
            <label for="freetext_general_1">Specify</label>
            <input class="form-control" id="freetext_general_1" name="freetext_general" type="text"
                   data-concept="1915^FREETEXT GENERAL^99DCT">
        </div>
    </div>

    <div class="form-group">
        <label for="gravida">Number of previous pregnancies<span class="required">*</span></label>

        <div>
            <small><i>If client has never been pregnant, enter '0'.</i></small>
        </div>
        <input class="form-control gravida" id="gravida" name="gravida" type="number" data-concept="5624^GRAVIDA^99DCT"
               required="required">
    </div>

    <div class="form-group relevant_gravida">
        <label for="parity">Number of previous deliveries<span class="required">*</span></label>

        <div>
            <small><i>The number of children a woman has delivered?</i></small>
        </div>
        <input class="form-control lessThanGravida" id="parity" name="parity" type="number"
               data-concept="1053^PARITY^99DCT" required="required">
    </div>

    <div class="form-group">
        <label for="hiv_status">HIV status</label>
        <select class="form-control" id="hiv_status" name="hiv_status"
                data-concept="6709^HIV STATUS^99DCT">
            <option value="">...</option>
            <option value="664^NEGATIVE^99DCT">Negative</option>
            <option value="703^POSITIVE^99DCT">Positive</option>
            <option value="1067^UNKNOWN^99DCT">Unknown</option>
        </select>
    </div>

    <div class="form-group relevant_hiv_status">
        <label for="last_cd4_by_facs">Latest CD4 count</label>
        <input class="form-control" id="last_cd4_by_facs" name="last_cd4_by_facs" type="number"
               data-concept="1871^LAST CD4, BY FACS^99DCT">
    </div>

    <div class="form-group relevant_hiv_status">
        <label for="date_of_last_cd4_by_facs">Date of latest CD4 count</label>
        <input class="form-control datepicker nonFutureDate" id="date_of_last_cd4_by_facs" name="date_last_cd4_by_facs"
               type="date" data-concept="1871^LAST CD4, BY FACS^99DCT^DATE">
    </div>

    <div class="form-group relevant_current_visit_type">
        <label for="most_recent_via">Prior Visual Inspection with Acetic Acid (VIA)</label>

        <div>
            <small><i>Patient's most recent Visual Inspection with Acetic Acid (VIA) screening.</i></small>
        </div>
        <select class="form-control" id="most_recent_via" name="most_recent_via"
                data-concept="7381^MOST RECENT VISUAL INSPECTION WITH ACETIC ACID RESULT^99DCT">
            <option value="">...</option>
            <option value="703^POSITIVE^99DCT">Positive</option>
            <option value="664^NEGATIVE^99DCT">Negative</option>
            <option value="1175^NOT APPLICABLE^99DCT">Not Applicable</option>
        </select>
    </div>
</div>

<div class="section">
    <h4>Current family planning method</h4>

    <fieldset name="374^METHOD OF FAMILY PLANNING^99DCT">
        <div class="form-group">
            <label class="font-normal">
                <input id="method_of_family_planning.condoms" type="checkbox"
                       data-concept="374^METHOD OF FAMILY PLANNING^99DCT" value="190^CONDOMS^99DCT">
                Condoms
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="method_of_family_planning.female_sterilization" type="checkbox"
                       data-concept="374^METHOD OF FAMILY PLANNING^99DCT" value="5276^FEMALE STERILIZATION^99DCT">
                Sterilization / Hysterectomy
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="method_of_family_planning.intrauterine_device" type="checkbox"
                       data-concept="374^METHOD OF FAMILY PLANNING^99DCT" value="5275^INTRAUTERINE DEVICE^99DCT">
                Intrauterine device
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="method_of_family_planning.diaphragm" type="checkbox"
                       data-concept="374^METHOD OF FAMILY PLANNING^99DCT" value="5278^DIAPHRAGM^99DCT">
                Diaphragm / Cervical cap
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="method_of_family_planning.family_planning_via_oral_contraceptive_pills" type="checkbox"
                       data-concept="374^METHOD OF FAMILY PLANNING^99DCT" value="780^ORAL CONTRACEPTION^99DCT">
                Oral contraceptive pills
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="method_of_family_planning.natural_family_planning" type="checkbox"
                       data-concept="374^METHOD OF FAMILY PLANNING^99DCT" value="5277^NATURAL FAMILY PLANNING^99DCT">
                Natural family planning
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="method_of_family_planning.injectable_contraceptives" type="checkbox"
                       data-concept="374^METHOD OF FAMILY PLANNING^99DCT" value="5279^INJECTABLE CONTRACEPTIVES^99DCT">
                Injectable hormonesa
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="method_of_family_planning.contraceptive_implant" type="checkbox"
                       data-concept="374^METHOD OF FAMILY PLANNING^99DCT" value="6220^CONTRACEPTIVE IMPLANT^99DCT">
                Implant / Patching
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="method_of_family_planning.none" type="checkbox"
                       data-concept="374^METHOD OF FAMILY PLANNING^99DCT" value="1107^NONE^99DCT">
                None
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="method_of_family_planning.do_not_know" type="checkbox"
                       data-concept="374^METHOD OF FAMILY PLANNING^99DCT" value="1624^DO NOT KNOW^99DCT">
                Do not know
            </label>
        </div>
    </fieldset>
</div>

<div class="section" data-concept="8916^CHIEF COMPLAINT, DETAILED^99DCT">
    <h4>Select all symptoms that best describe complaints</h4>
    <fieldset name="8916^CHIEF COMPLAINT, DETAILED^99DCT">
        <div class="form-group">
            <label class="font-normal">
                <input id="chief_complaint.pain" type="checkbox"
                       data-concept="5219^CHIEF COMPLAINT^99DCT" value="6613^PAIN^99DCT">
                Pain
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="chief_complaint.asymptomatic" type="checkbox"
                       data-concept="5219^CHIEF COMPLAINT^99DCT" value="5006^ASYMPTOMATIC^99DCT">
                Asymptomatic
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="chief_complaint.having_hypoglycemia_symptoms_in_past_month" type="checkbox"
                       data-concept="5219^CHIEF COMPLAINT^99DCT"
                       value="8008^HAVING HYPOGLYCEMIA SYMPTOMS IN PAST MONTH^99DCT">
                Hypoglycemia symptoms in past month
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="chief_complaint.vaginal_discharge" type="checkbox"
                       data-concept="5219^CHIEF COMPLAINT^99DCT" value="5993^VAGINAL DISCHARGE^99DCT">
                Vaginal discharge
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="chief_complaint.vaginal_bleeding" type="checkbox"
                       data-concept="5219^CHIEF COMPLAINT^99DCT" value="1489^VAGINAL BLEEDING^99DCT">
                Vaginal bleeding
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="chief_complaint.dysfunctional_uterine_bleeding" type="checkbox"
                       data-concept="5219^CHIEF COMPLAINT^99DCT" value="6497^DYSFUNCTIONAL UTERINE BLEEDING^99DCT">
                Dysfunctional uterine bleeding
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="chief_complaint.menorrhagia" type="checkbox"
                       data-concept="5219^CHIEF COMPLAINT^99DCT" value="1461^MENORRHAGIA^99DCT">
                Menorrhagia
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="chief_complaint.postmenopausal_bleeding" type="checkbox"
                       data-concept="5219^CHIEF COMPLAINT^99DCT" value="8274^POSTMENOPAUSAL BLEEDING^99DCT">
                Postmenopausal bleeding
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="chief_complaint.postcoital_bleeding" type="checkbox"
                       data-concept="5219^CHIEF COMPLAINT^99DCT" value="8273^POSTCOITAL BLEEDING^99DCT">
                Postcoital bleeding
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="chief_complaint.none" type="checkbox"
                       data-concept="5219^CHIEF COMPLAINT^99DCT" value="1107^NONE^99DCT">
                None
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input class="has-other" id="chief_complaint.other_non_coded" type="checkbox"
                       data-concept="5219^CHIEF COMPLAINT^99DCT" value="5622^OTHER NON-CODED^99DCT">
                Other
            </label>
        </div>
        <div class="form-group freetext">
            <label for="freetext_general_2">Specify</label>
            <input class="form-control" id="freetext_general_2" name="freetext_general" type="text"
                   data-concept="1915^FREETEXT GENERAL^99DCT">
        </div>
    </fieldset>
</div>

<div class="section" data-concept="9170^VISUAL CERVICAL EXAM FINDINGS, DETAILED^99DCT">
    <h4>Visual cervical exam findings</h4>

    <div class="help-block">
        <small><i>Findings on the cervix based on a performed exam.</i></small>
    </div>
    <fieldset name="9170^VISUAL CERVICAL EXAM FINDINGS, DETAILED^99DCT">
        <div class="form-group">
            <label class="font-normal">
                <input id="cervical_exam.normal" type="checkbox"
                       data-concept="7484^VISUAL CERVICAL EXAM FINDINGS^99DCT" value="1115^NORMAL^99DCT">
                Normal
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="cervical_exam.cervical_intraepithelial_neoplasia_grade_1" type="checkbox"
                       data-concept="7484^VISUAL CERVICAL EXAM FINDINGS^99DCT"
                       value="7424^CERVICAL INTRAEPITHELIAL NEOPLASIA GRADE 1^99DCT">
                Cervical intraepithelial neoplasia grade 1
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="cervical_exam.cervical_intraepithelial_neoplasia_grade_2" type="checkbox"
                       data-concept="7484^VISUAL CERVICAL EXAM FINDINGS^99DCT"
                       value="7425^CERVICAL INTRAEPITHELIAL NEOPLASIA GRADE 2^99DCT">
                Cervical intraepithelial neoplasia grade 2
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="cervical_exam.cervical_intraepithelial_neoplasia_grade_3" type="checkbox"
                       data-concept="7484^VISUAL CERVICAL EXAM FINDINGS^99DCT"
                       value="7216^CERVICAL INTRAEPITHELIAL NEOPLASIA GRADE 3 ^99DCT">
                Cervical intraepithelial neoplasia grade 3
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="cervical_exam.cervical_cancer" type="checkbox"
                       data-concept="7484^VISUAL CERVICAL EXAM FINDINGS^99DCT" value="6537^CERVICAL CANCER^99DCT">
                Cervical cancer
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="cervical_exam.positive_via_with_aceto_white_area" type="checkbox"
                       data-concept="7484^VISUAL CERVICAL EXAM FINDINGS^99DCT"
                       value="7507^POSITIVE VISUAL INSPECTION WITH ACETIC ACID WITH ACETO WHITE AREA^99DCT">
                Positive visual inspection with acetic acid with aceto white area
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="cervical_exam.positive_via_with_suspicious_lesion" type="checkbox"
                       data-concept="7484^VISUAL CERVICAL EXAM FINDINGS^99DCT"
                       value="7508^POSITIVE VISUAL INSPECTION WITH ACETIC ACID WITH SUSPICIOUS LESION^99DCT">
                Positive visual inspection with acetic acid with suspicious lesion
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="cervical_exam.other_non_coded" type="checkbox"
                       data-concept="7484^VISUAL CERVICAL EXAM FINDINGS^99DCT" value="5622^OTHER NON-CODED^99DCT">
                Other
            </label>
        </div>
    </fieldset>
</div>
<div class="section" data-concept="9171^VISUAL VAGINAL EXAM FINDINGS, DETAILED^99DCT">
    <h4>Visual vaginal exam findings</h4>

    <div class="help-block">
        <small><i>Findings on the vagina based on a performed exam.</i></small>
    </div>
    <fieldset name="9171^VISUAL VAGINAL EXAM FINDINGS, DETAILED^99DCT">
        <div class="form-group">
            <label class="font-normal">
                <input id="vaginal_exam.normal" type="checkbox"
                       data-concept="7490^VISUAL VAGINAL EXAM FINDINGS ^99DCT" value="1115^NORMAL^99DCT">
                Normal
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="vaginal_exam.suspicion_of_cancer_vaginal_lesion" type="checkbox"
                       data-concept="7490^VISUAL VAGINAL EXAM FINDINGS ^99DCT"
                       value="9177^SUSPICIOUS OF CANCER, VULVA LESION^99DCT">
                Vaginal lesion suspicious for cancer
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="vaginal_exam.vaginal_intraepithelial_neoplasia_grade_1" type="checkbox"
                       data-concept="7490^VISUAL VAGINAL EXAM FINDINGS ^99DCT"
                       value="7492^VAGINAL INTRAEPITHELIAL NEOPLASIA GRADE 1^99DCT">
                Vaginal intraepithelial neoplasia grade 1
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="vaginal_exam.vaginal_intraepithelial_neoplasia_grade_2" type="checkbox"
                       data-concept="7490^VISUAL VAGINAL EXAM FINDINGS ^99DCT"
                       value="7491^VAGINAL INTRAEPITHELIAL NEOPLASIA GRADE 2 ^99DCT">
                Vaginal intraepithelial neoplasia grade 2
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="vaginal_exam.vaginal_intraepithelial_neoplasia_grade_3" type="checkbox"
                       data-concept="7490^VISUAL VAGINAL EXAM FINDINGS ^99DCT"
                       value="7435^VAGINAL INTRAEPITHELIAL NEOPLASIA GRADE 3^99DCT">
                Vaginal intraepithelial neoplasia grade 3
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input class="has-other" id="vaginal_exam.other_non_coded" type="checkbox"
                       data-concept="7490^VISUAL VAGINAL EXAM FINDINGS ^99DCT" value="5622^OTHER NON-CODED^99DCT">
                Other
            </label>
        </div>
        <div class="form-group freetext">
            <label for="freetext_general_3">Specify</label>
            <input class="form-control" id="freetext_general_3" name="freetext_general" type="text"
                   data-concept="1915^FREETEXT GENERAL^99DCT">
        </div>
    </fieldset>
</div>
<div class="section" data-concept="9172^VISUAL VULVAL EXAM FINDINGS, DETAILED^99DCT">
    <h4>Visual vulval exam findings</h4>

    <div class="help-block">
        <small><i>Findings on the vulva based on a performed exam.</i></small>
    </div>
    <fieldset name="9172^VISUAL VULVAL EXAM FINDINGS, DETAILED^99DCT">
        <div class="form-group">
            <label class="font-normal">
                <input id="vulval_exam.normal" type="checkbox"
                       data-concept="7487^VISUAL VULVAL EXAM FINDINGS ^99DCT" value="1115^NORMAL^99DCT">
                Normal
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="vaginal_exam.suspicion_of_cancer_vulva_lesion" type="checkbox"
                       data-concept="7487^VISUAL VULVAL EXAM FINDINGS ^99DCT"
                       value="9177^SUSPICIOUS OF CANCER, VULVA LESION^99DCT">
                Vulva lesion suspicious for cancer
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="vulval_exam.condyloma_or_vulvar_intraepithelial_neoplasia_grade_1" type="checkbox"
                       data-concept="7487^VISUAL VULVAL EXAM FINDINGS ^99DCT"
                       value="7489^CONDYLOMA OR VULVAR INTRAEPITHELIAL NEOPLASIA GRADE 1^99DCT">
                Condyloma or vulvar intraepithelial neoplasia grade 1
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="vulval_exam.vulvar_intraepithelial_neoplasia_grade_2" type="checkbox"
                       data-concept="7487^VISUAL VULVAL EXAM FINDINGS ^99DCT"
                       value="7488^VULVAR INTRAEPITHELIAL NEOPLASIA GRADE 2^99DCT">
                Vulvar intraepithelial neoplasia grade 2
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="vulval_exam.vulvar_intraepithelial_neoplasia_grade_3" type="checkbox"
                       data-concept="7487^VISUAL VULVAL EXAM FINDINGS ^99DCT"
                       value="7483^VULVAR INTRAEPITHELIAL NEOPLASIA GRADE 3^99DCT">
                Vulvar intraepithelial neoplasia grade 3
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input class="has-other" id="vulval_exam.other_non_coded" type="checkbox"
                       data-concept="7487^VISUAL VULVAL EXAM FINDINGS ^99DCT" value="5622^OTHER NON-CODED^99DCT">
                Other
            </label>
        </div>
        <div class="form-group freetext">
            <label for="freetext_general_4">Specify</label>
            <input class="form-control" id="freetext_general_4" name="freetext_general" type="text"
                   data-concept="1915^FREETEXT GENERAL^99DCT">
        </div>
    </fieldset>
</div>

<div class="section">
    <div class="section repeat procedures_detailed" id="procedures_detailed"
         data-name="procedures_detailed"
         data-concept="7480^PROCEDURES DONE THIS VISIT, DETAILED^99DCT">

        <div class="form-group">
            <label for="procedures_done_this_visit">Procedure done this visit</label>
            <select class="form-control" id="procedures_done_this_visit"
                    name="procedures_done_this_visit"
                    data-concept="7479^PROCEDURES DONE THIS VISIT^99DCT" required="required">
                <option value="">...</option>
                <option value="6511^EXCISIONAL OR SURGICAL BIOPSY^99DCT">Biopsies</option>
                <option value="7478^ENDOCERVICAL CURETTAGE^99DCT">Endocervical curettage (ECC)</option>
                <option value="7466^CRYOTHERAPY^99DCT">Cryotherapy</option>
                <option value="7147^LOOP ELECTROSURGICAL EXCISION PROCEDURE^99DCT">
                    Loop Electrosurgical Excision Procedure (LEEP)
                </option>
                <option value="1107^NONE^99DCT">None</option>
            </select>
        </div>

        <div class="form-group relevant_procedures_done_this_visit_leep">
            <label for="anatomic_location_description">Provide Location of specimen</label>
            <select class="form-control" id="anatomic_location_description"
                    name="anatomic_location_description"
                    data-concept="8268^ANATOMIC LOCATION DESCRIPTION^99DCT">
                <option value="">...</option>
                <option value="8266^SUPERFICIAL^99DCT">Superficial</option>
                <option value="8267^DEEP^99DCT">Deep</option>
                <option value="5622^OTHER NON-CODED^99DCT">Other</option>
            </select>
        </div>

        <div class="form-group relevant_procedures_done_this_visit_biopsies">
            <label for="clock_face_cervical_biopsy_location">
                Provide location where biopsy for specimen was done: __O'clock
            </label>
            <input class="form-control" id="clock_face_cervical_biopsy_location"
                   name="clock_face_cervical_biopsy_location" type="number"
                   data-concept="7481^CLOCK FACE CERVICAL BIOPSY LOCATION ^99DCT">
        </div>

        <div class="form-group relevant_procedures_done_this_visit_leep">
            <label for="number_of_specimen_collected">Number of specimen collected</label>
            <input class="form-control" id="number_of_specimen_collected"
                   name="number_of_specimen_collected" type="number"
                   data-concept="7481^CLOCK FACE CERVICAL BIOPSY LOCATION ^99DCT">
        </div>

        <div class="form-group" style="display: none">
            <label for="pathological_diagnosis_added_cervix">
                Pathological diagnosis for cervical specimen
            </label>
            <select class="form-control" id="pathological_diagnosis_added_cervix"
                    name="pathological_diagnosis_added_cervix"
                    data-concept="8278^PATHOLOGICAL DIAGNOSIS ADDED^99DCT" required="required">
                <option value="">...</option>
                <option value="1115^NORMAL^99DCT">Normal</option>
                <option value="149^CERVICITIS^99DCT">Cervicitis</option>
                <option value="8282^CERVICAL SQUAMOUS METAPLASIA^99DCT">Cervical squamous metaplasia</option>
                <option value="7424^CERVICAL INTRAEPITHELIAL NEOPLASIA GRADE 1^99DCT">
                    Mild cervical intraepithelial neoplasia (CIN 1)
                </option>
                <option value="7425^CERVICAL INTRAEPITHELIAL NEOPLASIA GRADE 2^99DCT">
                    Moderate cervical intraepithelial neoplasia (CIN 2)
                </option>
                <option value="7216^CERVICAL INTRAEPITHELIAL NEOPLASIA GRADE 3^99DCT">
                    Severe cervical intraepithelial neoplasia (CIN 3)
                </option>
                <option value="8275^CERVICAL ADENOCARCINOMA^99DCT">Cervical adenocarcinoma</option>
                <option value="7421^SQUAMOUS CELL CARCINOMA, NOT OTHERWISE SPECIFIED ^99DCT">
                    Cervical squamous cell carcinoma
                </option>
                <option value="5622^OTHER NON-CODED^99DCT">Other</option>
            </select>
        </div>

        <div class="form-group" style="display: none">
            <label for="pathological_diagnosis_added_vagina">
                Pathological diagnosis for vaginal specimen
            </label>
            <select class="form-control" id="pathological_diagnosis_added_vagina"
                    name="pathological_diagnosis_added_vagina"
                    data-concept="8278^PATHOLOGICAL DIAGNOSIS ADDED^99DCT" required="required">
                <option value="">...</option>
                <option value="1115^NORMAL^99DCT">Normal</option>
                <option value="7492^VAGINAL INTRAEPITHELIAL NEOPLASIA GRADE 1^99DCT">
                    Mild vaginal intraepithelial neoplasia (VAIN1)
                </option>
                <option value="7491^VAGINAL INTRAEPITHELIAL NEOPLASIA GRADE 2 ^99DCT">
                    Moderate vaginal intraepithelial neoplasia (VAIN 2)
                </option>
                <option value="7435^VAGINAL INTRAEPITHELIAL NEOPLASIA GRADE 3^99DCT">
                    Severe vaginal intraepithelial neoplasia (VAIN 3)
                </option>
                <option value="7425^CERVICAL INTRAEPITHELIAL NEOPLASIA GRADE 2^99DCT">
                    Moderate cervical intraepithelial neoplasia (CIN 2)
                </option>
                <option value="7216^CERVICAL INTRAEPITHELIAL NEOPLASIA GRADE 3^99DCT">
                    Severe cervical intraepithelial neoplasia (CIN 3)
                </option>
                <option value="5622^OTHER NON-CODED^99DCT">Other</option>
            </select>
        </div>

        <div class="form-group" style="display: none">
            <label for="pathological_diagnosis_added_vulva">
                Pathological diagnosis for vulval specimen
            </label>
            <select class="form-control" id="pathological_diagnosis_added_vulva"
                    name="pathological_diagnosis_added_vulva"
                    data-concept="8278^PATHOLOGICAL DIAGNOSIS ADDED^99DCT" required="required">
                <option value="">...</option>
                <option value="1115^NORMAL^99DCT">Normal</option>
                <option value="7489^CONDYLOMA OR VULVAR INTRAEPITHELIAL NEOPLASIA GRADE 1^99DCT">
                    Condyloma / Mild vulva intraepithelial neoplasia (VIN1)
                </option>
                <option value="7488^VULVAR INTRAEPITHELIAL NEOPLASIA GRADE 2^99DCT">
                    Moderate vulva intraepithelial neoplasia (VIN 2)
                </option>
                <option value="7483^VULVAR INTRAEPITHELIAL NEOPLASIA GRADE 3^99DCT">
                    Severe vulva intraepithelial neoplasia (VIN 3)
                </option>
                <option value="5622^OTHER NON-CODED^99DCT">Other</option>
            </select>
        </div>
    </div>

    <div class="form-group">
        <label for="ccsp_plan">Management Plan</label>
        <select class="form-control" id="ccsp_plan" name="ccsp_plan"
                data-concept="7500^GYNECOLOGIC ONCOLOGY PLAN^99DCT" required="required">
            <option value="">...</option>
            <option value="9178^VIA FOLLOW-UP IN THREE MONTHS^99DCT">VIA 3 months follow up</option>
            <option value="7498^ROUTINE VIA IN 6-MONTHS^99DCT">VIA 6 months follow up</option>
            <option value="7496^ROUTINE VIA IN 1-YEAR^99DCT">Routine VIA in 1-year</option>
            <option value="7497^ROUTINE VIA IN 3-YEARS^99DCT">Routine VIA in 3-years</option>
            <option value="7383^REFERRAL FOR COLPOSCOPY^99DCT">Referral for Colposcopy</option>
            <option value="7499^REFERRAL TO GYNAE-ONCOLOGY^99DCT">Referral to Gynae-Oncology</option>
            <option value="7466^CRYOTHERAPY^99DCT">Referral for Cryotherapy</option>
            <option value="1496^CLINICIAN^99DCT">Referral to Clinician</option>
            <option value="5622^OTHER NON-CODED^99DCT"></option>
        </select>
    </div>

    <div class="form-group">
        <h5><strong>Directive family planning counseling performed</strong></h5>
        <div class="form-group">
            <label class="font-normal">
                <input name="ccsp_directive_fp" type="radio"
                       data-concept="6681^FAMILY PLANNING COUNSELING PERFORMED^99DCT"
                       value="1065^YES^99DCT">
                Yes
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input name="ccsp_directive_fp" type="radio"
                       data-concept="6681^FAMILY PLANNING COUNSELING PERFORMED^99DCT"
                       value="1066^NO^99DCT">
                No
            </label>
        </div>
    </div>
</div>
<div class="section" data-concept="9175^FAMILY PLANNING REFILL PROVIDED, DETAILED^99DCT">
    <h4>Family planning refills dispensed</h4>
    <fieldset name="9175^FAMILY PLANNING REFILL PROVIDED, DETAILED^99DCT">
        <div class="form-group">
            <label class="font-normal">
                <input id="ccsp_refill_dispense.condoms" type="checkbox"
                       data-concept="7495^FAMILY PLANNING REFILL PROVIDED^99DCT"
                       value="190^CONDOMS^99DCT">
                Condoms
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="ccsp_refill_dispense.female_sterilization" type="checkbox"
                       data-concept="7495^FAMILY PLANNING REFILL PROVIDED^99DCT"
                       value="5276^FEMALE STERILIZATION^99DCT">
                Sterilization / Hysterectomy
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="ccsp_refill_dispense.intrauterine_device" type="checkbox"
                       data-concept="7495^FAMILY PLANNING REFILL PROVIDED^99DCT"
                       value="5275^INTRAUTERINE DEVICE^99DCT">
                Intrauterine device
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="ccsp_refill_dispense.diaphragm" type="checkbox"
                       data-concept="7495^FAMILY PLANNING REFILL PROVIDED^99DCT"
                       value="5278^DIAPHRAGM^99DCT">
                Diaphragm / Cervical cap
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="ccsp_refill_dispense.family_planning_via_oral_contraceptive_pills" type="checkbox"
                       data-concept="7495^FAMILY PLANNING REFILL PROVIDED^99DCT"
                       value="780^ORAL CONTRACEPTION^99DCT">
                Oral contraceptive pills
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="ccsp_refill_dispense.natural_family_planning" type="checkbox"
                       data-concept="7495^FAMILY PLANNING REFILL PROVIDED^99DCT"
                       value="5277^NATURAL FAMILY PLANNING^99DCT">
                Natural family planning
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="ccsp_refill_dispense.injectable_contraceptives" type="checkbox"
                       data-concept="7495^FAMILY PLANNING REFILL PROVIDED^99DCT"
                       value="5279^INJECTABLE CONTRACEPTIVES^99DCT">
                Injectable hormonesa
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="ccsp_refill_dispense.contraceptive_implant" type="checkbox"
                       data-concept="7495^FAMILY PLANNING REFILL PROVIDED^99DCT"
                       value="6220^CONTRACEPTIVE IMPLANT^99DCT">
                Implant / Patching
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="ccsp_refill_dispense.none" type="checkbox"
                       data-concept="7495^FAMILY PLANNING REFILL PROVIDED^99DCT"
                       value="1107^NONE^99DCT">
                None
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input class="has-other" id="ccsp_refill_dispense.other_non_coded" type="checkbox"
                       data-concept="7495^FAMILY PLANNING REFILL PROVIDED^99DCT"
                       value="5622^OTHER NON-CODED^99DCT">
                Other
            </label>
        </div>
        <div class="form-group freetext">
            <label for="freetext_general_6">Specify</label>
            <input class="form-control" id="freetext_general_6" name="freetext_general" type="text"
                   data-concept="1915^FREETEXT GENERAL^99DCT">
        </div>
    </fieldset>
</div>

<div class="section" data-concept="9176^FAMILY PLANNING METHOD CHOSEN, DETAILED^99DCT">
    <h4>New family planning method initiated</h4>
    <fieldset name="9176^FAMILY PLANNING METHOD CHOSEN, DETAILED^99DCT">
        <div class="form-group">
            <label class="font-normal">
                <input id="ccsp_new_method.condoms" type="checkbox"
                       data-concept="7240^FAMILY PLANNING METHOD CHOSEN^99DCT"
                       value="190^CONDOMS^99DCT">
                Condoms
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="ccsp_new_method.female_sterilization" type="checkbox"
                       data-concept="7240^FAMILY PLANNING METHOD CHOSEN^99DCT"
                       value="5276^FEMALE STERILIZATION^99DCT">
                Sterilization / Hysterectomy
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="ccsp_new_method.intrauterine_device" type="checkbox"
                       data-concept="7240^FAMILY PLANNING METHOD CHOSEN^99DCT"
                       value="5275^INTRAUTERINE DEVICE^99DCT">
                Intrauterine device
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="ccsp_new_method.diaphragm" type="checkbox"
                       data-concept="7240^FAMILY PLANNING METHOD CHOSEN^99DCT"
                       value="5278^DIAPHRAGM^99DCT">
                Diaphragm / Cervical cap
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="ccsp_new_method.family_planning_via_oral_contraceptive_pills" type="checkbox"
                       data-concept="7240^FAMILY PLANNING METHOD CHOSEN^99DCT"
                       value="780^ORAL CONTRACEPTION^99DCT">
                Oral contraceptive pills
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="ccsp_new_method.natural_family_planning" type="checkbox"
                       data-concept="7240^FAMILY PLANNING METHOD CHOSEN^99DCT"
                       value="5277^NATURAL FAMILY PLANNING^99DCT">
                Natural family planning
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="ccsp_new_method.injectable_contraceptives" type="checkbox"
                       data-concept="7240^FAMILY PLANNING METHOD CHOSEN^99DCT"
                       value="5279^INJECTABLE CONTRACEPTIVES^99DCT">
                Injectable hormonesa
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="ccsp_new_method.contraceptive_implant" type="checkbox"
                       data-concept="7240^FAMILY PLANNING METHOD CHOSEN^99DCT"
                       value="6220^CONTRACEPTIVE IMPLANT^99DCT">
                Implant / Patching
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input id="ccsp_new_method.none" type="checkbox"
                       data-concept="7240^FAMILY PLANNING METHOD CHOSEN^99DCT"
                       value="1107^NONE^99DCT">
                None
            </label>
        </div>
        <div class="form-group">
            <label class="font-normal">
                <input class="has-other" id="ccsp_new_method.other_non_coded" type="checkbox"
                       data-concept="7240^FAMILY PLANNING METHOD CHOSEN^99DCT"
                       value="5622^OTHER NON-CODED^99DCT">
                Other
            </label>
        </div>
        <div class="form-group freetext">
            <label for="freetext_general_5">Specify</label>
            <input class="form-control" id="freetext_general_5" name="freetext_general" type="text"
                   data-concept="1915^FREETEXT GENERAL^99DCT">
        </div>
    </fieldset>
</div>

<div class="section">
    <div class="form-group">
        <label for="encounter.provider_id_select">Provider Name:</label>
        <input class="form-control" id="encounter.provider_id_select" type="text"
               placeholder="Start typing provider name here ...">
        <input class="form-control" name="encounter.provider_id_select" type="hidden">
    </div>

    <div class="form-group show_provider_id_text">
        <label for="encounter.provider_id">Enter provider's system-id:<span class="required">*</span></label>
        <input class="form-control checkDigit" id="encounter.provider_id" name="encounter.provider_id" type="text"
               placeholder="Or enter the provider system id here ..." required="required">
    </div>

    <div class="form-group">
        <label for="return_visit_date">Return visit date:</label>
        <input class="form-control datepicker checkFutureDate" data-concept="5096^RETURN VISIT DATE^99DCT"
               id="return_visit_date" name="return_visit_date" type="text"
               readonly="readonly">
    </div>
</div>

<div class="form-group text-center">
    <input class="btn btn-primary" id="save_draft" type="button" value="Save"/>
    <input class="btn btn-primary" id="submit_form" type="button" value="Submit"/>
</div>
</form>
</body>
<script type="text/javascript">

$(document).ready(function () {

    var dateFormat = "dd-mm-yy";
    var currentDate = $.datepicker.formatDate(dateFormat, new Date());
    $('#encounter\\.encounter_datetime').val(currentDate);

    $('#save_draft').click(function () {
        $(this).prop('disabled', true);
        document.saveDraft(this);
        $(this).prop('disabled', false);
    });

    $('#submit_form').click(function () {
        $(this).prop('disabled', true);
        document.submit();
        $(this).prop('disabled', false);
    });

    $('#via_form').validate({
        rules: {
            gravida: {
                number: true,
                min: 0
            },
            parity: {
                number: true,
                min: 0
            },
            last_cd4_by_facs: {
                number: true,
                range: [0, 1500]
            },
            clock_face_cervical_biopsy_location: {
                number: true,
                range: [1, 12]
            }
        }
    });

    var locationName = [
        {"val": "7", "label": "Chulaimbo"},
        {"val": "3", "label": "Turbo"},
        {"val": "17", "label": "Iten"},
        {"val": "2", "label": "Mosoriot"},
        {"val": "8", "label": "Webuye"},
        {"val": "9", "label": "Ampath MTRH"}
    ];
    $('#encounter\\.location_id').autocomplete({
        source: locationName,
        create: function (event, ui) {
            var location_val = $('input[name="encounter\\.location_id"]').val();
            $.each(locationName, function (i, elem) {
                if (elem.val == location_val) {
                    $('#encounter\\.location_id').val(elem.label)
                }
                ;
            });
        },
        select: function (event, ui) {
            $('input[name="encounter\\.location_id"]').val(ui.item.val);
            $('#encounter\\.location_id').val(ui.item.label);
            return false;
        }
    });

    var provider = [
        {"label": "Daurine Achieng Agumba", "val": "3419-9"},
        {"label": "Irene Chepkosgei	Kurgat", "val": "3420-7"},
        {"label": "Rose	Cheruto	Toroitich", "val": "3421-5"},
        {"label": "Mary	Kipkurui Kimosop", "val": "3422-3"},
        {"label": "Jacqueline Chemom Ndiema", "val": "3423-1"},
        {"label": "Grace Wanjiru Mwangi", "val": "3424-9"},
        {"label": "Collette	Mabia Palapala", "val": "3425-6"},
        {"label": "Dorice Erima	Wekesa	Female", "val": "3426-4"},
        {"label": "Agnes Kagure	Boen", "val": "120-6"},
        {"label": "Linet Kerubo	Onyancha", "val": "3427-2"},
        {"label": "Delinah Muchai Tanui", "val": "1208-8"},
        {"label": "Hellen Mushimbi Indumbwe", "val": "1208-8"},
        {"label": "Lydia Cherugut Samoei", "val": "1525-5"},
        {"label": "Ruth	Kalunda	Nzili", "val": "1529-7"},
        {"label": "Lucy	Cheruto	Birgen", "val": "3428-0"},
        {"label": "Gratiah Nafuna Khaemba", "val": "1409-2"},
        {"label": "Leonida Chemutai	Mengich", "val": "1357-3"},
        {"label": "Ann Wangoi Maina", "val": "1412-6"},
        {"label": "Elkanah Omenge Orango", "val": "1474-6"},
        {"label": "Peter Mukhanadale Istura", "val": "1478-7"},
        {"label": "Hillary Mabeya", "val": "1476-1"},
        {"label": "Astrid Christoffersen Deb", "val": "1237-7"},
        {"label": "Philip Kipkirui Tonui", "val": "1485-7"}
    ];

    $('#encounter\\.provider_id_select').autocomplete({
        source: provider,
        create: function (event, ui) {
            var provider_val = $('input[name="encounter\\.provider_id_select"]').val();
            $.each(provider, function (i, elem) {
                if (elem.val == provider_val) {
                    $('#encounter\\.provider_id_select').val(elem.label)
                }
            });
        },
        select: function (event, ui) {
            $('input[name="encounter\\.provider_id_select"]').val(ui.item.val);
            $('#encounter\\.provider_id_select').val(ui.item.label);
            $('#encounter\\.provider_id').val(ui.item.val);
            $('.show_provider_id_text').hide();
            return false;
        }
    });
    $('#encounter\\.provider_id_select').change(function () {
        if ($('#encounter\\.provider_id_select').val() === '') {
            $('#encounter\\.provider_id').val('');
            $('.show_provider_id_text').show();
        }
    });

    /* Start - Checking that parity is less than gravida */
    $.validator.addMethod("lessThanGravida", function (value, element) {
                if ($.fn.isNotRequiredAndEmpty(value, element)) return true;
                var gravida = parseInt($(element).closest('.section').find('.gravida').val());
                return (parseInt(value) <= gravida);
            }, "Number of deliveries can't be more than number of pregnancies."
    );

    // attach 'lessThanGravida' class to perform validation.
    jQuery.validator.addClassRules({
        lessThanGravida: { lessThanGravida: true }
    });
    /* End - lessThanGravida*/

    /* Start - Female only breast cancer history */
    var $patientSex = $('#patient\\.sex');
    $patientSex.change(function () {
        var $womenOnly = $('.relevant_female');
        if ($patientSex.val() != 'F') {
            $womenOnly.hide();
        } else {
            $womenOnly.show();
        }
    });
    $patientSex.trigger('change');
    /* End - Female only breast cancer history */

    /* Start - Toggle based on HIV status */
    var $hivStatus = $('#hiv_status');
    $hivStatus.change(function () {
        var hivStatusValue = $hivStatus.val();
        var $hivStatusRelevant = $('.relevant_hiv_status');
        if (hivStatusValue == '703^POSITIVE^99DCT') {
            $hivStatusRelevant.show();
        } else {
            $hivStatusRelevant.hide();
        }
    });
    $hivStatus.trigger('change');
    /* End - Toggle based on HIV status */

    /* Start - Toggle based on visit type */
    var $visitType = $('#current_visit_type');
    $visitType.change(function () {
        var visitTypeValue = $visitType.val();
        var $visitTypeRelevant = $('.relevant_current_visit_type');
        if (visitTypeValue === '' || visitTypeValue == '7850^INITIAL VISIT ^99DCT') {
            $visitTypeRelevant.hide();
        } else {
            $visitTypeRelevant.show();
        }
    });
    $visitType.trigger('change');
    /* Start - Toggle based on visit type */

    /* Start - Toggle for gravida and parity based on gravida value */
    var $gravida = $('#gravida');
    $gravida.change(function () {
        var gravidaValue = parseInt($gravida.val());
        var $gravidaRelevant = $('.relevant_gravida');
        if (gravidaValue > 0) {
            $gravidaRelevant.show();
        } else {
            $gravidaRelevant.hide();
        }
    });
    $gravida.trigger('change');
    /* End - Toggle for gravida and parity based on gravida value */

    /* Start - Menstruation status skip logic */
    var $menstruationStatus = $('#menstruation_status');
    $menstruationStatus.change(function () {
        var menstruationStatusValue = $menstruationStatus.val();
        var $lackPeriod = $('.reason_for_lack_of_period');
        var $lastMenstruation = $('.last_menstrual_period_date');
        if (menstruationStatusValue == '6496^POST-MENOPAUSAL^99DCT'
                || menstruationStatusValue == '2060^AMENORRHEA^99DCT'
                || menstruationStatusValue == '5990^MENOPAUSAL^99DCT') {
            $lastMenstruation.hide();
        } else {
            $lastMenstruation.show();
        }
        if (menstruationStatusValue == '6496^POST-MENOPAUSAL^99DCT'
                || menstruationStatusValue == '2060^AMENORRHEA^99DCT') {
            $lackPeriod.show();
        } else {
            $lackPeriod.hide();
        }
    });
    $menstruationStatus.trigger('change');
    /* End - Menstruation status skip logic */

    /* Start - Toggle free text element */
    var $hasOther = $('.has-other');
    $hasOther.change(function () {
        var hasOtherValue = $(this).val();
        var $freetext = $(this).closest('.section').find('.freetext');
        if ($(this).is(':checkbox')) {
            if ($hasOther.is(':checked')) {
                $freetext.show();
            } else {
                $freetext.hide();
            }
        } else {
            if (hasOtherValue === '5622^OTHER NON-CODED^99DCT') {
                $freetext.show();
            } else {
                $freetext.hide();
            }
        }
    });
    $hasOther.trigger('change');
    /* End - Toggle free text element */

    /* Start - Last menstruation date */
    var $lastMenstruationDate = $('#last_menstrual_period_date');
    $lastMenstruationDate.change(function () {
        var dateString = $lastMenstruationDate.val();
        var date = new Date(dateString);
        var today = new Date();
        var timeDiff = today.getTime() - date.getTime();
        var maxDiff = 35 * 24 * 60 * 60 * 1000;
        var $urinePregnancy = $('.urine_pregnancy_test_qualitative');
        if (timeDiff > maxDiff) {
            $urinePregnancy.show();
        } else {
            $urinePregnancy.hide();
        }
    });
    $lastMenstruationDate.trigger('change');
    /* End - Last menstruation date */

    /* Start - Procedure done this visit */
    var procedureDoneDetailed = function () {
        var allProcedureDone = $("select[name='procedures_done_this_visit']");
        $.each(allProcedureDone, function (index, object) {
            $(object).change(function () {
                var procedureDoneValue = $(this).val();
                var $procedureDoneRelevantBiopsies = $(this).closest('.section').find('.relevant_procedures_done_this_visit_biopsies');
                var $procedureDoneRelevantLeep = $(this).closest('.section').find('.relevant_procedures_done_this_visit_leep');
                if (procedureDoneValue == '7147^LOOP ELECTROSURGICAL EXCISION PROCEDURE^99DCT') {
                    $procedureDoneRelevantBiopsies.hide();
                    $procedureDoneRelevantLeep.show();
                } else if (procedureDoneValue == '6511^EXCISIONAL OR SURGICAL BIOPSY^99DCT') {
                    $procedureDoneRelevantBiopsies.show();
                    $procedureDoneRelevantLeep.hide();
                } else {
                    $procedureDoneRelevantBiopsies.hide();
                    $procedureDoneRelevantLeep.hide();
                }
            });
            $(object).trigger('change');
        });
    };
    procedureDoneDetailed();
    /* End - Procedure done this visit */

    var validateAlone = function (source, values, message) {
        var errors = {};
        var validator = $('form').validate();

        var fieldSet = $(source).closest('fieldset');
        if (fieldSet === undefined) {
            return true;
        }

        var selected = false;
        var checkedBoxes = $(fieldSet).find('input:checkbox:checked');
        if (checkedBoxes.length > 1) {
            $.each(checkedBoxes, function (i, checkBox) {
                $.each(values, function (j, value) {
                    if ($(checkBox).val() == value) {
                        selected = true;
                    }
                })
            })
        }

        if (selected) {
            errors[$(fieldSet).attr('name')] = message;
            validator.showErrors(errors);
        } else {
            $(fieldSet).removeClass('error');
            $(fieldSet).closest('.section').find('label.error').remove();
        }
    };

    /* Start - Hiding refill and new based on current value */
    var $familyPlanning = $(':checkbox[data-concept="374^METHOD OF FAMILY PLANNING^99DCT"]');
    $familyPlanning.change(function() {
        var value = $(this).val();
        var $chosen = $(':checkbox[data-concept="7240^FAMILY PLANNING METHOD CHOSEN^99DCT"][value="' + value + '"]');
        var $refilled = $(':checkbox[data-concept="7495^FAMILY PLANNING REFILL PROVIDED^99DCT"][value="' + value + '"]');
        if (value != "5622^OTHER NON-CODED^99DCT" && value != "1107^NONE^99DCT") {
            if ($(this).is(':checked')) {
                $chosen.closest('.form-group').hide();
                $refilled.closest('.form-group').show();
            } else {
                $chosen.closest('.form-group').show();
                $refilled.closest('.form-group').hide();
            }
        }

        var values = ["1624^DO NOT KNOW^99DCT", "1107^NONE^99DCT"];
        var message = "If None or Don't know is selected, it should be the only option.";
        validateAlone($(this), values, message);
    });
    $familyPlanning.trigger('change');
    /* End - Hiding refill and new based on current value */

    var noneValues = ["1107^NONE^99DCT"];
    var noneMessage = "If None is selected, it should be the only option.";
    $(':checkbox[data-concept="7495^FAMILY PLANNING REFILL PROVIDED^99DCT"]').change(function () {
        validateAlone($(this), noneValues, noneMessage);
    });

    $(':checkbox[data-concept="7240^FAMILY PLANNING METHOD CHOSEN^99DCT"]').change(function () {
        validateAlone($(this), noneValues, noneMessage);
    });

    $(':checkbox[data-concept="5219^CHIEF COMPLAINT^99DCT"]').change(function () {
        validateAlone($(this), noneValues, noneMessage);
    });

    var normalValues = ['1115^NORMAL^99DCT'];
    var normalMessage = "If Normal is selected, it should be the only option.";
    $(':checkbox[data-concept="7484^VISUAL CERVICAL EXAM FINDINGS^99DCT"]').change(function () {
        validateAlone($(this), normalValues, normalMessage);
    });
    $(':checkbox[data-concept="7490^VISUAL VAGINAL EXAM FINDINGS ^99DCT"]').change(function () {
        validateAlone($(this), normalValues, normalMessage);
    });
    $(':checkbox[data-concept="7487^VISUAL VULVAL EXAM FINDINGS ^99DCT"]').change(function () {
        validateAlone($(this), normalValues, normalMessage);
    });

    $.fn.customValidationCheck = function () {
        return true;
    };
});
</script>

</html>
